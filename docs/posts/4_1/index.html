<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>Psych 447: Consolidation of skills</title>


<link rel="canonical" href="https://vuw-psych-447.netlify.app/posts/4_1/"/>
<link rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2021-03-16"/>
<meta property="article:created" itemprop="dateCreated" content="2021-03-16"/>
<meta name="article:author" content="Joseph Bulbulia"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Psych 447: Consolidation of skills"/>
<meta property="og:type" content="article"/>
<meta property="og:url" content="https://vuw-psych-447.netlify.app/posts/4_1/"/>
<meta property="og:image" content="https://vuw-psych-447.netlify.app/posts/4_1/op.png"/>
<meta property="og:image:width" content="10241"/>
<meta property="og:image:height" content="8450"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Psych 447"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="Psych 447: Consolidation of skills"/>
<meta property="twitter:url" content="https://vuw-psych-447.netlify.app/posts/4_1/"/>
<meta property="twitter:image" content="https://vuw-psych-447.netlify.app/posts/4_1/op.png"/>
<meta property="twitter:image:width" content="10241"/>
<meta property="twitter:image:height" content="8450"/>
<meta property="twitter:site" content="@go_bayes"/>
<meta property="twitter:creator" content="@go_bayes"/>

<!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
<meta name="citation_title" content="Psych 447: Consolidation of skills"/>
<meta name="citation_fulltext_html_url" content="https://vuw-psych-447.netlify.app/posts/4_1/"/>
<meta name="citation_fulltext_world_readable" content=""/>
<meta name="citation_online_date" content="2021/03/16"/>
<meta name="citation_publication_date" content="2021/03/16"/>
<meta name="citation_author" content="Joseph Bulbulia"/>
<meta name="citation_author_institution" content="Victoria University of Wellington"/>
<!--/radix_placeholder_meta_tags-->
  
  <meta name="citation_reference" content="citation_title=Screening for serious mental illness in the general population with the K6 screening scale: Results from the WHO world mental health (WMH) survey initiative;citation_publication_date=2010;citation_volume=19 Suppl 1;citation_author=Ronald C Kessler;citation_author=Jennifer Greif Green;citation_author=Michael J Gruber;citation_author=Nancy A Sampson;citation_author=Evelyn Bromet;citation_author=Marius Cuitan;citation_author=Toshi A Furukawa;citation_author=Oye Gureje;citation_author=Hristo Hinkov;citation_author=Chi-Yi Hu;citation_author=Carmen Lara;citation_author=Sing Lee;citation_author=Zeina Mneimneh;citation_author=Landon Myer;citation_author=Mark Oakley-Browne;citation_author=Jose Posada-Villa;citation_author=Rajesh Sagar;citation_author=Maria Carmen Viana;citation_author=Alan M Zaslavsky"/>
  <meta name="citation_reference" content="citation_title=Short screening scales to monitor population prevalences and trends in non-specific psychological distress;citation_publication_date=2002;citation_volume=32;citation_author=R C Kessler;citation_author=G Andrews;citation_author=L J Colpe;citation_author=E Hiripi;citation_author=D K Mroczek;citation_author=S L T Normand;citation_author=E E Walters;citation_author=A M Zaslavsky"/>
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["creative_commons","title","description","author","date","output","bibliography","citation_url","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["CC BY-NC-SA"]},{"type":"character","attributes":{},"value":["Consolidation of skills"]},{"type":"NULL"},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url","affiliation","affiliation_url","orcid_id"]}},"value":[{"type":"character","attributes":{},"value":["Joseph Bulbulia"]},{"type":"character","attributes":{},"value":["https://josephbulbulia.netlify.app"]},{"type":"character","attributes":{},"value":["Victoria University of Wellington"]},{"type":"character","attributes":{},"value":["https://www.wgtn.ac.nz"]},{"type":"character","attributes":{},"value":["0000-0002-5861-2056"]}]}]},{"type":"character","attributes":{},"value":["2021-MAR-16"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","highlight"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["pygments"]}]}]},{"type":"character","attributes":{},"value":["bib.bib"]},{"type":"character","attributes":{},"value":["https://vuw-psych-447.netlify.app/posts/4_1/"]},{"type":"character","attributes":{},"value":["https://vuw-psych-447.netlify.app/posts/4_1/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["bib.bib","lecture_4_files/anchor-4.2.2/anchor.min.js","lecture_4_files/bowser-1.9.3/bowser.min.js","lecture_4_files/distill-2.2.21/template.v2.js","lecture_4_files/figure-html5/bdommodelgraph-1.png","lecture_4_files/figure-html5/unnamed-chunk-12-1.png","lecture_4_files/figure-html5/unnamed-chunk-14-1.png","lecture_4_files/figure-html5/unnamed-chunk-15-1.png","lecture_4_files/figure-html5/unnamed-chunk-16-1.png","lecture_4_files/figure-html5/unnamed-chunk-17-1.png","lecture_4_files/figure-html5/unnamed-chunk-18-1.png","lecture_4_files/figure-html5/unnamed-chunk-19-1.png","lecture_4_files/figure-html5/unnamed-chunk-19-2.png","lecture_4_files/figure-html5/unnamed-chunk-20-1.png","lecture_4_files/figure-html5/unnamed-chunk-22-1.png","lecture_4_files/figure-html5/unnamed-chunk-23-1.png","lecture_4_files/figure-html5/unnamed-chunk-24-1.png","lecture_4_files/figure-html5/unnamed-chunk-25-1.png","lecture_4_files/figure-html5/unnamed-chunk-26-1.png","lecture_4_files/figure-html5/unnamed-chunk-27-1.png","lecture_4_files/figure-html5/unnamed-chunk-28-1.png","lecture_4_files/figure-html5/unnamed-chunk-29-1.png","lecture_4_files/figure-html5/unnamed-chunk-30-1.png","lecture_4_files/figure-html5/unnamed-chunk-31-1.png","lecture_4_files/figure-html5/unnamed-chunk-32-1.png","lecture_4_files/figure-html5/unnamed-chunk-33-1.png","lecture_4_files/figure-html5/unnamed-chunk-34-1.png","lecture_4_files/figure-html5/unnamed-chunk-35-1.png","lecture_4_files/figure-html5/unnamed-chunk-36-1.png","lecture_4_files/figure-html5/unnamed-chunk-37-1.png","lecture_4_files/figure-html5/unnamed-chunk-38-1.png","lecture_4_files/figure-html5/unnamed-chunk-39-1.png","lecture_4_files/figure-html5/unnamed-chunk-40-1.png","lecture_4_files/figure-html5/unnamed-chunk-41-1.png","lecture_4_files/figure-html5/unnamed-chunk-42-1.png","lecture_4_files/figure-html5/unnamed-chunk-43-1.png","lecture_4_files/figure-html5/unnamed-chunk-44-1.png","lecture_4_files/figure-html5/unnamed-chunk-45-1.png","lecture_4_files/figure-html5/unnamed-chunk-46-1.png","lecture_4_files/header-attrs-2.7.1/header-attrs.js","lecture_4_files/jquery-1.11.3/jquery.min.js","lecture_4_files/kePrint-0.0.1/kePrint.js","lecture_4_files/lightable-0.0.1/lightable.css","lecture_4_files/popper-2.6.0/popper.min.js","lecture_4_files/table1-1.0/table1_defaults.css","lecture_4_files/tippy-6.2.7/tippy-bundle.umd.min.js","lecture_4_files/tippy-6.2.7/tippy-light-border.css","lecture_4_files/tippy-6.2.7/tippy.css","lecture_4_files/tippy-6.2.7/tippy.umd.min.js","lecture_4_files/webcomponents-2.0.0/webcomponents.js","op.pdf","op.png","table.tex","yaml.pptx"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.7.1/header-attrs.js"></script>
  <link href="../../site_libs/table1-1.0/table1_defaults.css" rel="stylesheet" />
  <script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
  <link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<script type="text/javascript" cookie-consent="tracking" async src="https://www.googletagmanager.com/gtag/js?id=G-GQF269N0S4"></script>
<script type="text/javascript" cookie-consent="tracking">
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-GQF269N0S4');
</script>
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Consolidation of skills","authors":[{"author":"Joseph Bulbulia","authorURL":"https://josephbulbulia.netlify.app","affiliation":"Victoria University of Wellington","affiliationURL":"https://www.wgtn.ac.nz","orcidID":"0000-0002-5861-2056"}],"publishedDate":"2021-03-16T00:00:00.000+00:00","citationText":"Bulbulia, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">Psych 447</a>
<a href="../../about.html">About</a>
<a href="../../index.html">Lecture Topics</a>
<a href="../../assessments.html">Assessments</a>
<a href="../../index_workbooks.html">Workbooks</a>
</div>
<div class="nav-right">
<a href="https://go-bayes.github.io/psych-447/" aria-label="Link to source">
<i class="fa fa-code" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Consolidation of skills</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->

</div>

<div class="d-byline">
  Joseph Bulbulia <a href="https://josephbulbulia.netlify.app" class="uri">https://josephbulbulia.netlify.app</a> (Victoria University of Wellington)<a href="https://www.wgtn.ac.nz" class="uri">https://www.wgtn.ac.nz</a>
  
<br/>2021-MAR-16
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#get-data">Get data</a></li>
<li><a href="#preamble">Preamble</a></li>
<li><a href="#data-carpentry-continued">Data carpentry continued</a>
<ul>
<li><a href="#different-methods-for-selecting-columns">Different methods for selecting columns</a></li>
<li><a href="#re-leveling-a-factor">Re-leveling a factor</a></li>
<li><a href="#creating-factors-from-numerical-indicators">Creating factors from numerical indicators</a></li>
<li><a href="#using-ifelse-to-create-factors">Using <code>ifelse</code> to create factors</a></li>
<li><a href="#transformations-of-indicators-scaling-centering-and-logs">Transformations of indicators: scaling, centering, and logs</a></li>
<li><a href="#pro-tip-1">Pro tip 1:</a></li>
<li><a href="#create-and-work-with-dates-a-date">Create and work with dates a date</a></li>
<li><a href="#create-a-timeline">Create a timeline</a></li>
<li><a href="#slice"><code>Slice</code></a></li>
<li><a href="#lags-and-leads-using-timeseries-data">Lags and leads using timeseries data</a></li>
<li><a href="#pro-tip-2">Pro tip 2</a></li>
</ul></li>
<li><a href="#data-summary">Data summary</a>
<ul>
<li><a href="#summarise-all-your-data">Summarise all your data</a></li>
<li><a href="#the-skimr-package">The <code>skimr</code> package</a></li>
<li><a href="#table1-other-canned-table-packages"><code>Table1</code> &amp; other canned table packages</a></li>
<li><a href="#create-a-table-using-pipe-functions">Create a table using pipe functions</a></li>
<li><a href="#bar-graphs">Bar graphs</a></li>
<li><a href="#missing-data-graphs">Missing data graphs</a></li>
<li><a href="#boxplots">Boxplots</a></li>
<li><a href="#correlation-graphs">Correlation graphs</a></li>
<li><a href="#the-report-package">The <code>report</code> package</a></li>
<li><a href="#measures">Measures</a></li>
<li><a href="#order-of-your-method-section">Order of your Method section</a></li>
</ul></li>
<li><a href="#appendix-1a-sampling-procedure-nzavs-time-10-2018-conducted-from-18.06.2018-28.09.2019">Appendix 1A Sampling Procedure – NZAVS Time 10 (2018; conducted from 18.06.2018-28.09.2019)</a></li>
<li><a href="#appendix-1b-sampling-procedure-nzavs-time-11-2019-conducted-from-29.09.2019-17.10.2020">Appendix 1B Sampling Procedure – NZAVS Time 11 (2019; conducted from 29.09.2019-17.10.2020)</a></li>
<li><a href="#appendix-2-johanness-mini-lecture-on-the-papaja-package">Appendix 2 Johannes’s mini-lecture on the <code>papaja</code> package</a></li>
<li><a href="#appendix-3-style-advice-about-research-methods">Appendix 3 Style advice about research methods</a></li>
</ul>
</nav>
</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="op.png" width="5120" /></p>
</div>
<h3 id="get-data">Get data</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#libraries</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://docs.ropensci.org/skimr/'>skimr</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>'skimr'</span><span class='op'>)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://lubridate.tidyverse.org'>lubridate</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>'lubridate'</span><span class='op'>)</span>

<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span><span class='op'>(</span><span class='st'>"devtools"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>"devtools"</span><span class='op'>)</span>
<span class='op'>}</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/easystats/easystats'>easystats</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'>devtools</span><span class='fu'>::</span><span class='fu'><a href='https://devtools.r-lib.org//reference/remote-reexports.html'>install_github</a></span><span class='op'>(</span><span class='st'>"easystats/easystats"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># Attaching packages (red = needs update)
✔ insight     0.13.1.1   ✔ bayestestR  0.8.3.1 
✔ performance 0.7.0.1    ✔ parameters  0.12.0.1
✔ see         0.6.2.1    ⚠ effectsize  0.4.3.1 
✔ correlation 0.6.0.1    ✔ modelbased  0.5.9   
✔ report      0.2.0      
Warnings or errors in CRAN checks for package(s) &#39;insight&#39;, &#39;bayestestR&#39;, &#39;parameters&#39;, &#39;effectsize&#39;, &#39;modelbased&#39;, &#39;correlation&#39;.
Restart the R-Session and update packages in red with &#39;easystats::easystats_update()&#39;.</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/jrnold/ggthemes'>ggthemes</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>'ggthemes'</span><span class='op'>)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://nickch-k.github.io/pmdplyr'>pmdplyr</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>"pmdplyr"</span><span class='op'>)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='http://haozhu233.github.io/kableExtra/'>kableExtra</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>"kableExtra"</span><span class='op'>)</span>
<span class='co'># this should be part of easystats but in case not:</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://easystats.github.io/report/'>report</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>'report'</span><span class='op'>)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/paul-buerkner/brms'>brms</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>'brms'</span><span class='op'>)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/lme4/lme4/'>lme4</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>'lme4'</span><span class='op'>)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/benjaminrich/table1'>table1</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>'table1'</span><span class='op'>)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://vincentarelbundock.github.io/modelsummary/'>modelsummary</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>"modelsummary"</span><span class='op'>)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/njtierney/naniar'>naniar</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>"naniar"</span><span class='op'>)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://ggraph.data-imaginist.com'>ggraph</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>"ggraph"</span><span class='op'>)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/ddsjoberg/gtsummary'>gtsummary</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>"gtsummary"</span><span class='op'>)</span>


<span class='co'># load tidyverse</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='http://tidyverse.tidyverse.org'>"tidyverse"</a></span><span class='op'>)</span>

<span class='co'># theme set</span>
<span class='fu'>theme_set</span><span class='op'>(</span><span class='fu'>theme_classic</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># uncomment below and run this code</span>
<span class='co'># easystats::install_easystats_latest()</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz_0</span> <span class='op'>&lt;-</span> <span class='fu'>readr</span><span class='fu'>::</span><span class='fu'><a href='https://readr.tidyverse.org/reference/read_delim.html'>read_csv2</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/connections.html'>url</a></span><span class='op'>(</span><span class='st'>"https://raw.githubusercontent.com/go-bayes/psych-447/main/data/nz/nz.csv"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># take all characters and make them factors</span>
<span class='co'># also get rid of duplicate rows</span>
<span class='co'># Note the convention of renaming dataframe when creating a new one:</span>
<span class='co'># ` nz &lt;-nz_0 %&gt;%... `</span>

<span class='va'>f</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"None Of The Time"</span>,<span class='st'>"A Little Of The Time"</span>,<span class='st'>"Some Of The Time"</span>,  <span class='st'>"Most Of The Time"</span>, <span class='st'>"All Of The Time"</span><span class='op'>)</span>

<span class='va'>nz</span> <span class='op'>&lt;-</span><span class='va'>nz_0</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate_all.html'>mutate_if</a></span><span class='op'>(</span><span class='va'>is.character</span>, <span class='va'>factor</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>select</span><span class='op'>(</span><span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>SWB.Kessler01</span>,<span class='va'>SWB.Kessler02</span>,<span class='va'>SWB.Kessler03</span>,<span class='va'>SWB.Kessler04</span>,<span class='va'>SWB.Kessler05</span>, <span class='va'>SWB.Kessler06</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>Wave <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>Wave</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>FeelHopeless <span class='op'>=</span> <span class='fu'>forcats</span><span class='fu'>::</span><span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_relevel.html'>fct_relevel</a></span><span class='op'>(</span><span class='va'>FeelHopeless</span>,<span class='va'>f</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>FeelDepressed <span class='op'>=</span> <span class='fu'>forcats</span><span class='fu'>::</span><span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_relevel.html'>fct_relevel</a></span><span class='op'>(</span><span class='va'>FeelDepressed</span>,<span class='va'>f</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>FeelRestless <span class='op'>=</span> <span class='fu'>forcats</span><span class='fu'>::</span><span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_relevel.html'>fct_relevel</a></span><span class='op'>(</span><span class='va'>FeelRestless</span>,<span class='va'>f</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>EverythingIsEffort <span class='op'>=</span> <span class='fu'>forcats</span><span class='fu'>::</span><span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_relevel.html'>fct_relevel</a></span><span class='op'>(</span><span class='va'>EverythingIsEffort</span>,<span class='va'>f</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>FeelWorthless <span class='op'>=</span> <span class='fu'>forcats</span><span class='fu'>::</span><span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_relevel.html'>fct_relevel</a></span><span class='op'>(</span><span class='va'>FeelWorthless</span>,<span class='va'>f</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>FeelNervous <span class='op'>=</span> <span class='fu'>forcats</span><span class='fu'>::</span><span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_relevel.html'>fct_relevel</a></span><span class='op'>(</span><span class='va'>FeelNervous</span>,<span class='va'>f</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># not used</span>
<span class='co'># nz &lt;- haven::zap_formats(nz)</span>
<span class='co'># nz &lt;- haven::zap_label(nz)</span>
<span class='co'># nz &lt;- haven::zap_widths(nz)</span>
<span class='co'># nz &lt;- haven::zap_labels(nz)</span>
</code></pre>
</div>
</div>
<h2 id="preamble">Preamble</h2>
<p>One of the advantages of R is that allows us to create highly effective workflows. Today, we’ll reinforce and extend the workflow skills that you’ve started to develop in previous weeks. Below we’ll be working with the <code>nz</code> dataset, which is a reduced, truncated, and jittered version of waves 10 and 11 of the New Zealand Attitudes and Values Study. This dataset is for teaching only, if you’d like to learn more about the study to which it belongs, go <a href="https://www.psych.auckland.ac.nz/en/about/new-zealand-attitudes-and-values-study.html">here</a> or <a href="https://go-bayes.github.io/reports/posts/nzavs/">here</a>.</p>
<h2 id="data-carpentry-continued">Data carpentry continued</h2>
<h3 id="different-methods-for-selecting-columns">Different methods for selecting columns</h3>
<p>Suppose we want to select all variables that start with <code>Believe</code>. We can do this in a number of ways.</p>
<p>First there is explicit selection:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># explicit selection </span>
<span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='st'>"Believe.God"</span>, <span class='st'>"Believe.Spirit"</span><span class='op'>)</span><span class='op'>%&gt;%</span>
    <span class='fu'>glimpse</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 4,136
Columns: 2
$ Believe.God    &lt;fct&gt; Not Believe God, Not Believe God, Believe God…
$ Believe.Spirit &lt;fct&gt; Not Believe Spirit, Not Believe Spirit, Belie…</code></pre>
</div>
<p>We can select all instances of a column that start with a certain name. For this you by using <code>starts_with</code></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='fu'><a href='https://tidyselect.r-lib.org/reference/starts_with.html'>starts_with</a></span><span class='op'>(</span><span class='st'>"Believe"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
    <span class='fu'>glimpse</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 4,136
Columns: 2
$ Believe.God    &lt;fct&gt; Not Believe God, Not Believe God, Believe God…
$ Believe.Spirit &lt;fct&gt; Not Believe Spirit, Not Believe Spirit, Belie…</code></pre>
</div>
<p>By the same token, we can select all instances of a variable that ends with a certain string by using <code>ends_with</code></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='fu'><a href='https://tidyselect.r-lib.org/reference/starts_with.html'>ends_with</a></span><span class='op'>(</span><span class='st'>"conditions"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
    <span class='fu'>glimpse</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 4,136
Columns: 2
$ NZ.Social.Conditions   &lt;dbl&gt; 4, 6, 3, 0, 4, 3, 4, 5, 4, 6, 5, 5, 6…
$ NZ.Business.Conditions &lt;dbl&gt; 8, 6, 4, 7, 5, 3, 4, 6, 6, 6, 5, 6, 5…</code></pre>
</div>
<p>We can cast a broader net and select all instances of a variable within a string by using <code>contains</code></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='fu'><a href='https://tidyselect.r-lib.org/reference/starts_with.html'>contains</a></span><span class='op'>(</span><span class='st'>"Believe"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
    <span class='fu'>glimpse</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 4,136
Columns: 3
$ Religion.Believe.Cats &lt;dbl&gt; 4, 4, 1, 1, 1, 1, 4, NA, 3, 3, 4, 4, 2…
$ Believe.God           &lt;fct&gt; Not Believe God, Not Believe God, Beli…
$ Believe.Spirit        &lt;fct&gt; Not Believe Spirit, Not Believe Spirit…</code></pre>
</div>
<p>As we can see, the net that we cast using <code>contains</code> was too broad. We don’t want the <code>Religion.Believe.Cats</code>.</p>
<p>In R, you can programme your way out of this corner as follows:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='fu'><a href='https://tidyselect.r-lib.org/reference/starts_with.html'>contains</a></span><span class='op'>(</span><span class='st'>"Believe"</span><span class='op'>)</span> <span class='op'>&amp;</span>  <span class='op'>-</span>  <span class='va'>Religion.Believe.Cats</span><span class='op'>)</span><span class='op'>%&gt;%</span>
   <span class='fu'>glimpse</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 4,136
Columns: 2
$ Believe.God    &lt;fct&gt; Not Believe God, Not Believe God, Believe God…
$ Believe.Spirit &lt;fct&gt; Not Believe Spirit, Not Believe Spirit, Belie…</code></pre>
</div>
<p>However, that’s inelegant; better to drop <code>contains</code> altogether and revert to another method.</p>
<h3 id="re-leveling-a-factor">Re-leveling a factor</h3>
<p>Death, taxes, and factors are consequence of living. Let’s look at the <code>BigDoms</code> variable in the nz, which is a factor identifying large religious denominations</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>BigDoms</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span>useNA <span class='op'>=</span><span class='st'>"ifany"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>.
 Buddhist Christian    Muslim   Not_Rel TheOthers      &lt;NA&gt; 
       37      1176        13      2697       136        77 </code></pre>
</div>
<p>Note the use of <code>ifany</code> to print the NAs in this table. It’s almost never sensible to ignore missing values!</p>
<p>Suppose we wanted to make “Not Rel” our base category for this factor. We could do so as follows:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>## suppose we want "Not_Rel" as the base category, and rearrange the other levels</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://forcats.tidyverse.org'>forcats</a></span><span class='op'>)</span> <span class='co'># this is part of the tidyverse package. </span>
<span class='va'>nz1</span><span class='op'>&lt;-</span><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>BigDoms</span>, <span class='va'>KESSLER6sum</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>BigDoms <span class='op'>=</span>  
                  <span class='fu'>forcats</span><span class='fu'>::</span><span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_relevel.html'>fct_relevel</a></span><span class='op'>(</span><span class='va'>BigDoms</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Not_Rel"</span>,<span class='st'>"Christian"</span>,<span class='st'>"Buddhist"</span>,<span class='st'>"Muslim"</span>,<span class='st'>"TheOthers"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>#inspect data</span>
<span class='va'>nz1</span><span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>BigDoms</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'>count</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 6 x 2
# Groups:   BigDoms [6]
  BigDoms       n
  &lt;fct&gt;     &lt;int&gt;
1 Not_Rel    2697
2 Christian  1176
3 Buddhist     37
4 Muslim       13
5 TheOthers   136
6 &lt;NA&gt;         77</code></pre>
</div>
<p>The reordering makes for a more sensible model because the base category is now <code>Not_Rel</code> or not-religious. Hence comparisons are to this category.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>m0</span><span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/glm.html'>glm</a></span><span class='op'>(</span> <span class='va'>KESSLER6sum</span> <span class='op'>~</span> <span class='va'>BigDoms</span>, data <span class='op'>=</span> <span class='va'>nz1</span> <span class='op'>)</span>
<span class='fu'>parameters</span><span class='fu'>::</span><span class='fu'><a href='https://easystats.github.io/parameters/reference/model_parameters.html'>model_parameters</a></span><span class='op'>(</span><span class='va'>m0</span><span class='op'>)</span>  <span class='op'>%&gt;%</span>
  <span class='fu'>print_html</span><span class='op'>(</span>caption <span class='op'>=</span> <span class='st'>"Model of Distress by Denomination with the base category is `No Religion'"</span><span class='op'>)</span>
</code></pre>
</div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#hngmbjbciu .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hngmbjbciu .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hngmbjbciu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hngmbjbciu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hngmbjbciu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hngmbjbciu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hngmbjbciu .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hngmbjbciu .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hngmbjbciu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hngmbjbciu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hngmbjbciu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hngmbjbciu .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#hngmbjbciu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hngmbjbciu .gt_from_md > :first-child {
  margin-top: 0;
}

#hngmbjbciu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hngmbjbciu .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hngmbjbciu .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#hngmbjbciu .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hngmbjbciu .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#hngmbjbciu .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hngmbjbciu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hngmbjbciu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hngmbjbciu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hngmbjbciu .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hngmbjbciu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#hngmbjbciu .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hngmbjbciu .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#hngmbjbciu .gt_left {
  text-align: left;
}

#hngmbjbciu .gt_center {
  text-align: center;
}

#hngmbjbciu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hngmbjbciu .gt_font_normal {
  font-weight: normal;
}

#hngmbjbciu .gt_font_bold {
  font-weight: bold;
}

#hngmbjbciu .gt_font_italic {
  font-style: italic;
}

#hngmbjbciu .gt_super {
  font-size: 65%;
}

#hngmbjbciu .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="hngmbjbciu" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="6" class="gt_heading gt_title gt_font_normal" style>Model of Distress by Denomination with the base category is `No Religion'</th>
    </tr>
    <tr>
      <th colspan="6" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style></th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Parameter</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Coefficient</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">SE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">95% CI</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">t(4026)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">p</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">(Intercept)</td>
      <td class="gt_row gt_center">5.17</td>
      <td class="gt_row gt_center">0.08</td>
      <td class="gt_row gt_center">(5.02, 5.32)</td>
      <td class="gt_row gt_center">67.55</td>
      <td class="gt_row gt_center">&lt; .001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">BigDoms (Christian)</td>
      <td class="gt_row gt_center">-0.25</td>
      <td class="gt_row gt_center">0.14</td>
      <td class="gt_row gt_center">(-0.53, 0.02)</td>
      <td class="gt_row gt_center">-1.82</td>
      <td class="gt_row gt_center">0.069 </td>
    </tr>
    <tr>
      <td class="gt_row gt_left">BigDoms (Buddhist)</td>
      <td class="gt_row gt_center">-0.32</td>
      <td class="gt_row gt_center">0.66</td>
      <td class="gt_row gt_center">(-1.60, 0.97)</td>
      <td class="gt_row gt_center">-0.48</td>
      <td class="gt_row gt_center">0.631 </td>
    </tr>
    <tr>
      <td class="gt_row gt_left">BigDoms (Muslim)</td>
      <td class="gt_row gt_center">-0.25</td>
      <td class="gt_row gt_center">1.10</td>
      <td class="gt_row gt_center">(-2.41, 1.91)</td>
      <td class="gt_row gt_center">-0.23</td>
      <td class="gt_row gt_center">0.820 </td>
    </tr>
    <tr>
      <td class="gt_row gt_left">BigDoms (TheOthers)</td>
      <td class="gt_row gt_center">0.82</td>
      <td class="gt_row gt_center">0.35</td>
      <td class="gt_row gt_center">(0.13, 1.51)</td>
      <td class="gt_row gt_center">2.33</td>
      <td class="gt_row gt_center">0.020 </td>
    </tr>
  </tbody>
  <tfoot class="gt_sourcenotes"></tfoot>
  
</table></div>
</div>
<p>We can see the results better using a coefficient graph, which visualises the information presented in the table.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='fu'>parameters</span><span class='fu'>::</span><span class='fu'><a href='https://easystats.github.io/parameters/reference/model_parameters.html'>model_parameters</a></span><span class='op'>(</span><span class='va'>m0</span><span class='op'>)</span> <span class='op'>)</span> <span class='op'>+</span> <span class='fu'>labs</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Comparison of Religious groups to secular people"</span>, 
subtitle <span class='op'>=</span> <span class='st'>"Christians are a little more chilled out, \n Other denoms are less chilled out"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/bdommodelgraph-1.png" width="624" /></p>
</div>
<p>The base category is the comparison class. Should we infer that “The Others” denomination causes greater distress? We’ll return to this, and related questions, in the upcoming weeks. For now let’s just leave it at “probably not.”</p>
<h3 id="creating-factors-from-numerical-indicators">Creating factors from numerical indicators</h3>
<p>It is almost never a good idea to transform continuous data into categorical data. However, occassionally, you will need to do so. For example, we might want to break the KESSLER6 distress indicator into its medically diagnostic components for “mild distress,” “moderate distress,” and “severe distress.” We may achieve this task using the <code>cut</code> function as follows:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz</span> <span class='op'>&lt;-</span><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>k6cats <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/cut.html'>cut</a></span><span class='op'>(</span>
    <span class='va'>KESSLER6sum</span>,
    breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='cn'>Inf</span>, <span class='fl'>5</span>, <span class='fl'>13</span>, <span class='cn'>Inf</span><span class='op'>)</span>,   <span class='co'># create Kessler 6 diagnostic categories</span>
    labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Low Distress"</span>, <span class='st'>"Moderate Distress"</span>, <span class='st'>"Serious Distress"</span><span class='op'>)</span>, 
    right <span class='op'>=</span> <span class='cn'>TRUE</span>
  <span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>nz</span><span class='op'>$</span><span class='va'>k6cats</span>, useNA <span class='op'>=</span> <span class='st'>"ifany"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>
     Low Distress Moderate Distress  Serious Distress 
             2560              1372               172 
             &lt;NA&gt; 
               32 </code></pre>
</div>
<h3 id="using-ifelse-to-create-factors">Using <code>ifelse</code> to create factors</h3>
<p>I prefer to maintain control over how I am making the categories. For example, in the previous example, I didn’t remember whether <code>cut</code> includes a value to the left or to the right. I had to look this up. However, I can use <code>ifelse</code> function to explicitly create the relevant categories:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>k6cats1 <span class='op'>=</span>  <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span>
    <span class='va'>KESSLER6sum</span> <span class='op'>&lt;=</span> <span class='fl'>5</span>,
    <span class='st'>"Low Distress"</span>,
    <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>KESSLER6sum</span> <span class='op'>&lt;=</span> <span class='fl'>13</span>,  <span class='st'>"Moderate Distress"</span>, <span class='st'>"Serious Distress"</span><span class='op'>)</span>
  <span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>k6cats1</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>count</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 4 x 2
# Groups:   k6cats1 [4]
  k6cats1               n
  &lt;fct&gt;             &lt;int&gt;
1 Low Distress       2560
2 Moderate Distress  1372
3 Serious Distress    172
4 &lt;NA&gt;                 32</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#check this is the same as the previous method</span>
<span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>k6cats</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>count</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 4 x 2
# Groups:   k6cats [4]
  k6cats                n
  &lt;fct&gt;             &lt;int&gt;
1 Low Distress       2560
2 Moderate Distress  1372
3 Serious Distress    172
4 &lt;NA&gt;                 32</code></pre>
</div>
<p>We can see that this method returns the same values as the <code>cut</code> method above.</p>
<h3 id="transformations-of-indicators-scaling-centering-and-logs">Transformations of indicators: scaling, centering, and logs</h3>
<p>Throughout this course, we’ll be standardising and centering indicators. Occasionally, we’ll need to perform log transformations. You’ll need to know how to do this.</p>
<p>Suppose we want to standardise the <code>Relid</code> indicator. This will transform the <code>Relid</code> indicator into standard deviation units. In later seminars, we’ll explain why this transformation is useful. For now, this is how you do it:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz1</span> <span class='op'>&lt;-</span> <span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>Relid</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>religousid_s <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>Relid</span>, scale <span class='op'>=</span> <span class='cn'>TRUE</span>, center  <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>nz1</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 6 x 2
  Relid religousid_s[,1]
  &lt;dbl&gt;            &lt;dbl&gt;
1     0           -0.624
2     0           -0.624
3     6            1.71 
4     6            1.71 
5     3            0.545
6     3            0.545</code></pre>
</div>
<p>What happened? The variable name for our standardised variable looks weird: <code>religious_s[ ,1]</code></p>
<p>This isn’t a worry. We use the variable as we would any other and all is fine.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>sjPlot</span><span class='fu'>::</span><span class='fu'><a href='https://strengejacke.github.io/sjPlot/reference/tab_model.html'>tab_model</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>religousid_s</span> <span class='op'>~</span> <span class='fl'>1</span> , data <span class='op'>=</span> <span class='va'>nz1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<table style="border-collapse:collapse; border:none;">
<tr>
<th style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; ">
 
</th>
<th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">
religousid_s
</th>
</tr>
<tr>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; ">
Predictors
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
Estimates
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
CI
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
p
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
(Intercept)
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.00
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.03 – 0.03
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
1.000
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;">
Observations
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3">
3993
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;">
R<sup>2</sup> / R<sup>2</sup> adjusted
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="3">
0.000 / 0.000
</td>
</tr>
</table>
</div>
<h3 id="pro-tip-1">Pro tip 1:</h3>
<p>Transform your data as the <strong>last</strong> step in your pipe workflow.</p>
<p>This is because if you filter cases, you’ll end up with a variable that isn’t measured standard deviations units</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nza</span> <span class='op'>&lt;-</span> <span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>Relid</span>, <span class='va'>BigDoms</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>religousid_s <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>Relid</span>, scale <span class='op'>=</span> <span class='cn'>TRUE</span>, center  <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> 
<span class='va'>nzb</span> <span class='op'>&lt;-</span> <span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>Relid</span>, <span class='va'>BigDoms</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>religousid_s <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>Relid</span>, scale <span class='op'>=</span> <span class='cn'>TRUE</span>, center  <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>BigDoms</span> <span class='op'>!=</span><span class='st'>"Not_Rel"</span><span class='op'>)</span>

<span class='co'># compare</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>nza</span><span class='op'>$</span><span class='va'>religousid_s</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>       V1         
 Min.   :-0.6237  
 1st Qu.:-0.6237  
 Median :-0.6237  
 Mean   : 0.0000  
 3rd Qu.: 0.5453  
 Max.   : 2.1040  
 NA&#39;s   :143      </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># with</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>nzb</span><span class='op'>$</span><span class='va'>religousid_s</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>       V1        
 Min.   :-0.234  
 1st Qu.: 0.935  
 Median : 1.325  
 Mean   : 1.298  
 3rd Qu.: 2.104  
 Max.   : 2.104  
 NA&#39;s   :66      </code></pre>
</div>
<p>When we filter last, the mean value in the dataset is 1.3 – everything has changed!</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz1</span> <span class='op'>&lt;-</span> <span class='va'>nz1</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>Relid</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>religousid_s <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>Relid</span>, scale <span class='op'>=</span> <span class='cn'>TRUE</span>, center  <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>nz1</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 6 x 2
  Relid religousid_s[,1]
  &lt;dbl&gt;            &lt;dbl&gt;
1     0           -0.624
2     0           -0.624
3     6            1.71 
4     6            1.71 
5     3            0.545
6     3            0.545</code></pre>
</div>
<p>or simply:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz1</span> <span class='op'>&lt;-</span> <span class='va'>nz1</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>Relid</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>religousid_s <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>Relid</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>nz1</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>To center a variable we set <code>scale = FALSE, center = TRUE</code></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz1</span> <span class='op'>&lt;-</span> <span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>religousid_c <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>Relid</span>, scale <span class='op'>=</span> <span class='cn'>FALSE</span>, center  <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># inspect new indicator</span>
<span class='va'>nz1</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>Relid</span>,<span class='va'>religousid_c</span><span class='op'>)</span><span class='op'>%&gt;%</span>
    <span class='fu'>glimpse</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 4,136
Columns: 2
$ Relid        &lt;dbl&gt; 0, 0, 6, 6, 3, 3, NA, NA, 0, 0, 0, 0, 1, 1, 3, …
$ religousid_c &lt;dbl[,1]&gt; &lt;matrix[23 x 1]&gt;</code></pre>
</div>
<p>We use the log transformation for extreme values. We can create a new indicator by combining <code>mutate</code> and <code>log</code> as follows:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz1</span> <span class='op'>&lt;-</span> <span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>charitydonate_log <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>CharityDonate</span> <span class='op'>+</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># inspect new indicator</span>
<span class='va'>nz1</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>CharityDonate</span>,<span class='va'>charitydonate_log</span><span class='op'>)</span><span class='op'>%&gt;%</span>
    <span class='fu'>glimpse</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 4,136
Columns: 2
$ CharityDonate     &lt;dbl&gt; 1000, 0, 500, 500, 50, 20, 20, 100, 400, 3…
$ charitydonate_log &lt;dbl&gt; 6.908755, 0.000000, 6.216606, 6.216606, 3.…</code></pre>
</div>
<p>Note that we have to add <span class="math display">\[+1\]</span> to the log transformation, as you will recall that the log of zero is undefined. You cannot obtain zero by raising it to the power of another number.</p>
<h3 id="create-and-work-with-dates-a-date">Create and work with dates a date</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz</span> <span class='op'>&lt;-</span> <span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>date <span class='op'>=</span> <span class='fu'><a href='http://lubridate.tidyverse.org/reference/make_datetime.html'>make_date</a></span><span class='op'>(</span>year <span class='op'>=</span> <span class='fl'>2009</span>, month <span class='op'>=</span> <span class='fl'>6</span>, day <span class='op'>=</span> <span class='fl'>30</span><span class='op'>)</span> <span class='op'>+</span> <span class='va'>TSCORE</span><span class='op'>)</span>  <span class='co'># first data of data collection in this study</span>
</code></pre>
</div>
</div>
<p>We can analyze dates, for example, for how many minutes were data collected?</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>date</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>      date           
 Min.   :2018-01-24  
 1st Qu.:2018-08-08  
 Median :2019-10-03  
 Mean   :2019-05-15  
 3rd Qu.:2019-12-05  
 Max.   :2020-10-10  </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>int</span><span class='op'>&lt;-</span><span class='fu'>lubridate</span><span class='fu'>::</span><span class='fu'><a href='http://lubridate.tidyverse.org/reference/interval.html'>interval</a></span><span class='op'>(</span><span class='fu'><a href='http://lubridate.tidyverse.org/reference/ymd.html'>ymd</a></span><span class='op'>(</span><span class='st'>"2018-01-02"</span><span class='op'>)</span>, <span class='fu'><a href='http://lubridate.tidyverse.org/reference/ymd.html'>ymd</a></span><span class='op'>(</span><span class='st'>"2020-10-06"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>#time in years</span>
<span class='fu'><a href='http://lubridate.tidyverse.org/reference/time_length.html'>time_length</a></span><span class='op'>(</span><span class='va'>int</span>, <span class='st'>"year"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 2.759563</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#time in minutes</span>
<span class='fu'><a href='http://lubridate.tidyverse.org/reference/time_length.html'>time_length</a></span><span class='op'>(</span><span class='va'>int</span>, <span class='st'>"minutes"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 1451520</code></pre>
</div>
<p>Fun! So much so you have some homework that will work with dates.</p>
<h3 id="create-a-timeline">Create a timeline</h3>
<p>Here we’re going to graph the number of responses each day for the years of data collection.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://lubridate.tidyverse.org'>lubridate</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://ggplot2.tidyverse.org'>ggplot2</a></span><span class='op'>)</span>


<span class='va'>datrep</span> <span class='op'>&lt;-</span> <span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'>count</span><span class='op'>(</span>day <span class='op'>=</span> <span class='fu'><a href='http://lubridate.tidyverse.org/reference/round_date.html'>floor_date</a></span><span class='op'>(</span><span class='va'>date</span>, <span class='st'>"day"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>Year <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span>
    <span class='va'>day</span> <span class='op'>&lt;</span> <span class='st'>"2018-01-01"</span>,
    <span class='fl'>2017</span>,
    <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>day</span> <span class='op'>&lt;</span> <span class='st'>"2019-01-01"</span>, <span class='fl'>2018</span>,
           <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>day</span> <span class='op'>&lt;</span> <span class='st'>"2020-01-01"</span>, <span class='fl'>2019</span>, <span class='fl'>2020</span><span class='op'>)</span><span class='op'>)</span>
  <span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>arrange</span><span class='op'>(</span><span class='va'>day</span><span class='op'>)</span>

<span class='co'># create the graph</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>datrep</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span><span class='va'>day</span>, <span class='va'>n</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_col</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>Year</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_date.html'>scale_x_date</a></span><span class='op'>(</span>date_labels <span class='op'>=</span> <span class='st'>"%b/%Y"</span><span class='op'>)</span>  <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span><span class='op'>(</span><span class='st'>"Days"</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ylab</a></span><span class='op'>(</span><span class='st'>"Count of Responses"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Our Dataset's Daily Counts"</span><span class='op'>)</span>  <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_classic</a></span><span class='op'>(</span><span class='op'>)</span>  <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_viridis.html'>scale_fill_viridis_d</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/unnamed-chunk-14-1.png" width="624" /></p>
</div>
<p>Note that we can use the <code>datrep</code> dataframe that we created to explore aspects of data collection. For example we can arrange the dataset by day in descending order of participants sampled:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>datrep</span><span class='op'>%&gt;%</span>
  <span class='fu'>arrange</span><span class='op'>(</span><span class='fu'>desc</span><span class='op'>(</span><span class='va'>n</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 623 x 3
   day            n Year 
   &lt;date&gt;     &lt;int&gt; &lt;fct&gt;
 1 2018-06-21   121 2018 
 2 2018-06-22   104 2018 
 3 2018-06-20    88 2018 
 4 2018-06-24    80 2018 
 5 2019-12-03    67 2019 
 6 2018-06-23    65 2018 
 7 2018-06-25    62 2018 
 8 2019-12-05    46 2019 
 9 2018-10-20    45 2018 
10 2018-06-26    44 2018 
# … with 613 more rows</code></pre>
</div>
<p>Take not of that code, you might need it for your workbook.</p>
<p>What might we do with dates? Well we might ask, were there any inherently stressful days?</p>
<p>To see this, we can take average stress levels by day, and then see where the high average stress days fall.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tn</span><span class='op'>&lt;-</span><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>date</span>,<span class='va'>KESSLER6sum</span>,<span class='va'>Id</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>date</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'>summarise</span><span class='op'>(</span>
   av_distress <span class='op'>=</span>  <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>KESSLER6sum</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>,
   n <span class='op'>=</span> <span class='fu'>n_distinct</span><span class='op'>(</span><span class='va'>Id</span><span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>arrange</span><span class='op'>(</span><span class='fu'>desc</span><span class='op'>(</span><span class='va'>av_distress</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'>glimpse</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 623
Columns: 3
$ date        &lt;date&gt; 2020-05-10, 2020-05-23, 2020-04-22, 2020-04-26,…
$ av_distress &lt;dbl&gt; 19.00000, 19.00000, 17.00000, 15.00000, 15.00000…
$ n           &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 3, 2, 3, 1, 1, 1, …</code></pre>
</div>
<p>Graphing the densities reveals the following</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tn</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span><span class='va'>date</span>, <span class='va'>av_distress</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_col</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>fill <span class='op'>=</span><span class='op'>(</span><span class='va'>n</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_date.html'>scale_x_date</a></span><span class='op'>(</span>date_labels <span class='op'>=</span> <span class='st'>"%b/%Y"</span><span class='op'>)</span>  <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_classic</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_viridis.html'>scale_fill_viridis_c</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/unnamed-chunk-17-1.png" width="624" /></p>
</div>
<p>Clearly the “stressful days” are an artifact of days with low numbers of participant respondents.</p>
<p>Let’s see whether there are any stressful days of the week. We do this by creating a weekday variable using the <code>wday</code> function in the <code>lubridate</code> package. Let’s graph our results using a pipe <code>%&gt;%</code> workflow:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>Id</span>, <span class='va'>date</span>, <span class='va'>KESSLER6sum</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>weekdays <span class='op'>=</span> <span class='fu'><a href='http://lubridate.tidyverse.org/reference/day.html'>wday</a></span><span class='op'>(</span><span class='va'>date</span>, label <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>weekdays</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarise</span><span class='op'>(</span>
    mn_k6 <span class='op'>=</span>  <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>KESSLER6sum</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>,
    sd_k6 <span class='op'>=</span>  <span class='fu'><a href='https://rdrr.io/r/stats/sd.html'>sd</a></span><span class='op'>(</span><span class='va'>KESSLER6sum</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>,
    n_k6w <span class='op'>=</span> <span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
    se_k6 <span class='op'>=</span> <span class='va'>sd_k6</span> <span class='op'>/</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>n_k6w</span><span class='op'>)</span>,
    lw_ci <span class='op'>=</span> <span class='va'>mn_k6</span> <span class='op'>-</span> <span class='fu'><a href='https://rdrr.io/r/stats/TDist.html'>qt</a></span><span class='op'>(</span><span class='fl'>1</span> <span class='op'>-</span> <span class='op'>(</span><span class='fl'>0.05</span> <span class='op'>/</span> <span class='fl'>2</span><span class='op'>)</span>, <span class='va'>n_k6w</span> <span class='op'>-</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>*</span> <span class='va'>se_k6</span>,
    up_ci <span class='op'>=</span> <span class='va'>mn_k6</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/TDist.html'>qt</a></span><span class='op'>(</span><span class='fl'>1</span> <span class='op'>-</span> <span class='op'>(</span><span class='fl'>0.05</span> <span class='op'>/</span> <span class='fl'>2</span><span class='op'>)</span>, <span class='va'>n_k6w</span> <span class='op'>-</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>*</span> <span class='va'>se_k6</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>weekdays</span>, y <span class='op'>=</span> <span class='va'>mn_k6</span>, colour <span class='op'>=</span> <span class='va'>mn_k6</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_linerange.html'>geom_errorbar</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>ymin <span class='op'>=</span> <span class='va'>lw_ci</span>, ymax <span class='op'>=</span> <span class='va'>up_ci</span><span class='op'>)</span>, width <span class='op'>=</span> <span class='fl'>.1</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>  <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous</a></span><span class='op'>(</span>limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>7</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_classic</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_viridis.html'>scale_fill_viridis_d</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/unnamed-chunk-18-1.png" width="624" /></p>
</div>
<p>Despite the variability over the two years of data collection, the bars of the graph overlap: we don’t find differences in distress by days.</p>
<p>“Ok Boomer,” you ask, “what if we were to calculate distress by generational cohorts?”</p>
<p>My reply, I’m not a boomer, I’m a GenX-er. I’m keen to check it out:</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz</span><span class='op'>$</span><span class='va'>hour</span>
</code></pre>
</div>
<pre><code>NULL</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>GenCohort</span>, <span class='va'>KESSLER6sum</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>GenCohort</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarise</span><span class='op'>(</span>
    mn_k6 <span class='op'>=</span>  <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>KESSLER6sum</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>,
    sd_k6 <span class='op'>=</span>  <span class='fu'><a href='https://rdrr.io/r/stats/sd.html'>sd</a></span><span class='op'>(</span><span class='va'>KESSLER6sum</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>,
    n_k6w <span class='op'>=</span> <span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
    se_k6 <span class='op'>=</span> <span class='va'>sd_k6</span> <span class='op'>/</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>n_k6w</span><span class='op'>)</span>,
    lw_ci <span class='op'>=</span> <span class='va'>mn_k6</span> <span class='op'>-</span> <span class='fu'><a href='https://rdrr.io/r/stats/TDist.html'>qt</a></span><span class='op'>(</span><span class='fl'>1</span> <span class='op'>-</span> <span class='op'>(</span><span class='fl'>0.05</span> <span class='op'>/</span> <span class='fl'>2</span><span class='op'>)</span>, <span class='va'>n_k6w</span> <span class='op'>-</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>*</span> <span class='va'>se_k6</span>,
    up_ci <span class='op'>=</span> <span class='va'>mn_k6</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/TDist.html'>qt</a></span><span class='op'>(</span><span class='fl'>1</span> <span class='op'>-</span> <span class='op'>(</span><span class='fl'>0.05</span> <span class='op'>/</span> <span class='fl'>2</span><span class='op'>)</span>, <span class='va'>n_k6w</span> <span class='op'>-</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>*</span> <span class='va'>se_k6</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>GenCohort</span>, y <span class='op'>=</span> <span class='va'>mn_k6</span>, colour <span class='op'>=</span> <span class='va'>GenCohort</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_linerange.html'>geom_errorbar</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>ymin <span class='op'>=</span> <span class='va'>lw_ci</span>, ymax <span class='op'>=</span> <span class='va'>up_ci</span><span class='op'>)</span>, width <span class='op'>=</span> <span class='fl'>.1</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>  <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous</a></span><span class='op'>(</span>limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>7</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_classic</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_hline</a></span><span class='op'>(</span>yintercept <span class='op'>=</span> <span class='fl'>5</span>,
             colour <span class='op'>=</span> <span class='st'>"red"</span>,
             linetype <span class='op'>=</span> <span class='st'>"dashed"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous</a></span><span class='op'>(</span>limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>
    legend.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>6</span><span class='op'>)</span>,
    legend.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>8</span><span class='op'>)</span>,
    axis.text.x <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span><span class='op'>(</span><span class='st'>"Birth Generation Cohort"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ylab</a></span><span class='op'>(</span><span class='st'>"Kessler 6 Distress"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Average Distress by Birth Cohort"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"Red line indicates clinically moderate distress threshold"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_viridis.html'>scale_colour_viridis_d</a></span><span class='op'>(</span><span class='op'>)</span> 
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/unnamed-chunk-19-1.png" width="960" /></p>
</div>
<p>Later, we’ll ask why you’re so stressed out.</p>
<h3 id="slice"><code>Slice</code></h3>
<p>Dplyr’s slice function can be handy. Say we only want the first four rows</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>datrep</span><span class='op'>%&gt;%</span>
  <span class='fu'>arrange</span><span class='op'>(</span><span class='fu'>desc</span><span class='op'>(</span><span class='va'>n</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>slice</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 4 x 3
  day            n Year 
  &lt;date&gt;     &lt;int&gt; &lt;fct&gt;
1 2018-06-21   121 2018 
2 2018-06-22   104 2018 
3 2018-06-20    88 2018 
4 2018-06-24    80 2018 </code></pre>
</div>
<p>Say we only want the 1st row, the 3rd row, and the 20th row</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>datrep</span><span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='fu'>desc</span><span class='op'>(</span><span class='va'>n</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/slice.html'>slice</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>3</span>,<span class='fl'>20</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 3 x 3
  day            n Year 
  &lt;date&gt;     &lt;int&gt; &lt;fct&gt;
1 2018-06-21   121 2018 
2 2018-06-20    88 2018 
3 2019-12-12    36 2019 </code></pre>
</div>
<h3 id="lags-and-leads-using-timeseries-data">Lags and leads using timeseries data</h3>
<p>Create a difference variable for change in Kessler 6</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://nickch-k.github.io/pmdplyr'>"pmdplyr"</a></span><span class='op'>)</span>
<span class='va'>df</span> <span class='op'>&lt;-</span><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>KESSLER6sum</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>wave <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>Wave</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
   <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>lag_k6 <span class='op'>=</span> <span class='fu'><a href='https://nickch-k.github.io/pmdplyr/reference/tlag.html'>tlag</a></span><span class='op'>(</span><span class='va'>KESSLER6sum</span>,
    .i <span class='op'>=</span> <span class='va'>Id</span>, <span class='co'># id variable</span>
    .t <span class='op'>=</span> <span class='va'>wave</span> <span class='co'># time series variable, needs to be numeric</span>
  <span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>diff_k6 <span class='op'>=</span> <span class='va'>lag_k6</span> <span class='op'>-</span> <span class='va'>KESSLER6sum</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>Id</span>,<span class='va'>Wave</span>,<span class='va'>KESSLER6sum</span>,<span class='va'>diff_k6</span>,<span class='va'>Emp.JobSecure</span>,<span class='va'>Employed</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'>arrange</span><span class='op'>(</span><span class='fu'>desc</span><span class='op'>(</span><span class='va'>diff_k6</span><span class='op'>)</span><span class='op'>)</span> 
</code></pre>
</div>
</div>
<p>What to do with this new variable. Well, we might explore whether employment security relates to distress change:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>df</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Wave</span> <span class='op'>==</span> <span class='fl'>2019</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>employed_employsecurity <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>Employed</span> <span class='op'>==</span><span class='fl'>1</span>, <span class='va'>Emp.JobSecure</span>,<span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>.</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>diff_k6</span>, fill <span class='op'>=</span> <span class='va'>employed_employsecurity</span><span class='op'>)</span> <span class='op'>)</span><span class='op'>+</span>
   <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span><span class='op'>(</span><span class='st'>"Difference in K6 eleveation (cases above 5)"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ylab</a></span><span class='op'>(</span><span class='st'>"Counts of cases"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>subtitle <span class='op'>=</span><span class='st'>"No clear relationship between unemployment insecurity and distress change"</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html'>scale_fill_discrete</a></span><span class='op'>(</span>name<span class='op'>=</span><span class='st'>"Employment Security 1-7"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_viridis.html'>scale_fill_viridis_d</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_classic</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"bottom"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/unnamed-chunk-23-1.png" width="624" /></p>
</div>
<p>And remarkably we don’t see much evidence in the cross-sectional analysis.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># create data frame with new variable Zero is for the unemeployed. </span>
<span class='va'>dfnew</span> <span class='op'>&lt;-</span> <span class='va'>df</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Wave</span> <span class='op'>==</span> <span class='fl'>2019</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>employed_employsecurity <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>Employed</span> <span class='op'>==</span> <span class='fl'>1</span>, <span class='va'>Emp.JobSecure</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
<span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>employed_employsecurity</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>dfnew</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 6 x 7
     Id Wave  KESSLER6sum diff_k6 Emp.JobSecure Employed
  &lt;dbl&gt; &lt;fct&gt;       &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;    &lt;dbl&gt;
1  1713 2019            1      20             4        1
2   564 2019            4      13            NA        0
3  1001 2019            0      12             4        1
4   517 2019            4      11            NA        0
5   610 2019           14       9             7        1
6   922 2019            5       9             7        1
# … with 1 more variable: employed_employsecurity &lt;dbl&gt;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Graph</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>dfnew</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>diff_k6</span>, <span class='va'>employed_employsecurity</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>.2</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_smooth.html'>geom_smooth</a></span><span class='op'>(</span>method <span class='op'>=</span> <span class='va'>lm</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span><span class='op'>(</span><span class='st'>"employed_employsecurity"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ylab</a></span><span class='op'>(</span><span class='st'>"Kessler 6 distress jumps over 5"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Jumps in distress change not related to employement insecurity"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_viridis.html'>scale_fill_viridis_d</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_classic</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/unnamed-chunk-24-1.png" width="624" /></p>
</div>
<p>However, perhaps our indicator is misleading us. We can formally model the relationship between employment security and Kessler6 distress across two years</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># create dataframe with the variables we need</span>
<span class='va'>dfnew2</span> <span class='op'>&lt;-</span> <span class='va'>df</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>employed_employsecurity <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>Employed</span> <span class='op'>==</span> <span class='fl'>1</span>, <span class='va'>Emp.JobSecure</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>employed_employsecurity</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>employsecurity_s <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>employed_employsecurity</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># multi-level model </span>

<span class='va'>m00a</span><span class='op'>&lt;-</span><span class='fu'>lme4</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/lme4/man/lmer.html'>lmer</a></span><span class='op'>(</span><span class='va'>KESSLER6sum</span> <span class='op'>~</span>  <span class='va'>employsecurity_s</span> <span class='op'>*</span> <span class='va'>Wave</span> <span class='op'>+</span> <span class='op'>(</span><span class='fl'>1</span><span class='op'>|</span><span class='va'>Id</span><span class='op'>)</span>, data <span class='op'>=</span> <span class='va'>dfnew2</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='fu'>ggeffects</span><span class='fu'>::</span><span class='fu'><a href='https://strengejacke.github.io/ggeffects/reference/ggpredict.html'>ggpredict</a></span><span class='op'>(</span><span class='va'>m00a</span>, terms<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"employsecurity_s"</span>, <span class='st'>"Wave"</span><span class='op'>)</span><span class='op'>)</span>,
     add.data <span class='op'>=</span> <span class='cn'>TRUE</span>, jitter <span class='op'>=</span> <span class='fl'>0.2</span>, dot.alpha <span class='op'>=</span><span class='fl'>.05</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_hline</a></span><span class='op'>(</span>yintercept <span class='op'>=</span> <span class='fl'>5</span>,
             colour <span class='op'>=</span> <span class='st'>"red"</span>,
             linetype <span class='op'>=</span> <span class='st'>"dashed"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"There is a relationship between employment security and Kessler6 distress"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/unnamed-chunk-25-1.png" width="624" /></p>
</div>
<p>This suggests a stable negative relationship between employment security and (low) distress. So is there are causal relationship? Not necessarily. Again, we return to casual inference in the upcoming weeks. For now, we want to alert you to an important lesson:</p>
<h3 id="pro-tip-2">Pro tip 2</h3>
<p>Do not read too much into your descriptive analysis!</p>
<p>This is especially true when creating new variables. Just because you can make a variable doesn’t mean you should use it, or interpret it!</p>
<p>Put differently, our workflow will require much more than descriptive statistics.</p>
<h2 id="data-summary">Data summary</h2>
<h3 id="summarise-all-your-data">Summarise all your data</h3>
<h3 id="the-skimr-package">The <code>skimr</code> package</h3>
<p>The skimmer package can be helpful in detecting problems. A drawback note that it is interpreting all factors as numbers).</p>
<p>For example. ( I won’t run the following code, you will do so for your homework).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://docs.ropensci.org/skimr/'>"skimr"</a></span><span class='op'>)</span>
<span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>date</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='co'>#not useful</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>Wave</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://docs.ropensci.org/skimr/reference/skim.html'>skim</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>However, I want to point out that <code>skimr</code> works with individual columns, and it accepts a tidy workflow.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>Wave</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>KESSLER6sum</span>,<span class='va'>HLTH.SleepHours</span><span class='op'>)</span>  <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://docs.ropensci.org/skimr/reference/skim.html'>skim</a></span><span class='op'>(</span><span class='op'>)</span> 
</code></pre>
</div>
<table style="width: auto;" class="table table-condensed">
<caption>
<span id="tab:unnamed-chunk-27">Table 1: </span>Data summary
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
Piped data
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
4136
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
Wave
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:left;">
Wave
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p25
</th>
<th style="text-align:right;">
p50
</th>
<th style="text-align:right;">
p75
</th>
<th style="text-align:right;">
p100
</th>
<th style="text-align:left;">
hist
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
KESSLER6sum
</td>
<td style="text-align:left;">
2018
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0.99
</td>
<td style="text-align:right;">
5.07
</td>
<td style="text-align:right;">
3.93
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:left;">
▇▅▂▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
KESSLER6sum
</td>
<td style="text-align:left;">
2019
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
0.99
</td>
<td style="text-align:right;">
5.20
</td>
<td style="text-align:right;">
4.01
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:left;">
▇▅▂▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
HLTH.SleepHours
</td>
<td style="text-align:left;">
2018
</td>
<td style="text-align:right;">
97
</td>
<td style="text-align:right;">
0.95
</td>
<td style="text-align:right;">
6.93
</td>
<td style="text-align:right;">
1.13
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
▁▅▇▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
HLTH.SleepHours
</td>
<td style="text-align:left;">
2019
</td>
<td style="text-align:right;">
69
</td>
<td style="text-align:right;">
0.97
</td>
<td style="text-align:right;">
6.96
</td>
<td style="text-align:right;">
1.14
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
▁▃▇▁▁
</td>
</tr>
</tbody>
</table>
</div>
<h3 id="table1-other-canned-table-packages"><code>Table1</code> &amp; other canned table packages</h3>
<p>In earlier seminars, we encountered the <code>table1</code> package, which makes really great html tables:</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/benjaminrich/table1'>table1</a></span><span class='op'>)</span>

<span class='fu'>table1</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/table1/man/table1.html'>table1</a></span><span class='op'>(</span><span class='op'>~</span><span class='va'>Age</span>  <span class='op'>+</span>
                 <span class='va'>GenCohort</span> <span class='op'>+</span>
                 <span class='va'>Male</span> <span class='op'>+</span> 
                 <span class='va'>Edu</span> <span class='op'>+</span>
                 <span class='va'>Pol.Orient</span> <span class='op'>+</span> 
                 <span class='va'>Relid</span> <span class='op'>+</span> 
                 <span class='va'>BigDoms</span>   <span class='op'>|</span> <span class='va'>Wave</span>, data <span class='op'>=</span> <span class='va'>nz</span>,
               overall <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
<div class="Rtable1"><table class="Rtable1">
<thead>
<tr>
<th class='rowlabel firstrow lastrow'></th>
<th class='firstrow lastrow'><span class='stratlabel'>2018<br><span class='stratn'>(N=2068)</span></span></th>
<th class='firstrow lastrow'><span class='stratlabel'>2019<br><span class='stratn'>(N=2068)</span></span></th>
</tr>
</thead>
<tbody>
<tr>
<td class='rowlabel firstrow'><span class='varlabel'>Age</span></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
</tr>
<tr>
<td class='rowlabel'>Mean (SD)</td>
<td>50.1 (13.5)</td>
<td>51.8 (13.4)</td>
</tr>
<tr>
<td class='rowlabel lastrow'>Median [Min, Max]</td>
<td class='lastrow'>52.0 [18.0, 90.0]</td>
<td class='lastrow'>54.1 [19.6, 91.1]</td>
</tr>
<tr>
<td class='rowlabel firstrow'><span class='varlabel'>GenCohort</span></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
</tr>
<tr>
<td class='rowlabel'>Gen Boombers: born >= 1946 & b.< 1961</td>
<td>693 (33.5%)</td>
<td>693 (33.5%)</td>
</tr>
<tr>
<td class='rowlabel'>Gen_Silent: born< 1946</td>
<td>50 (2.4%)</td>
<td>50 (2.4%)</td>
</tr>
<tr>
<td class='rowlabel'>GenX: born >=1961 & b.< 1980</td>
<td>886 (42.8%)</td>
<td>886 (42.8%)</td>
</tr>
<tr>
<td class='rowlabel'>GenY: born >=1980 & b.< 1996</td>
<td>387 (18.7%)</td>
<td>387 (18.7%)</td>
</tr>
<tr>
<td class='rowlabel lastrow'>GenZ: born >= 1996</td>
<td class='lastrow'>52 (2.5%)</td>
<td class='lastrow'>52 (2.5%)</td>
</tr>
<tr>
<td class='rowlabel firstrow'><span class='varlabel'>Male</span></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
</tr>
<tr>
<td class='rowlabel'>Male</td>
<td>772 (37.3%)</td>
<td>772 (37.3%)</td>
</tr>
<tr>
<td class='rowlabel'>Not_Male</td>
<td>1290 (62.4%)</td>
<td>1289 (62.3%)</td>
</tr>
<tr>
<td class='rowlabel lastrow'>Missing</td>
<td class='lastrow'>6 (0.3%)</td>
<td class='lastrow'>7 (0.3%)</td>
</tr>
<tr>
<td class='rowlabel firstrow'><span class='varlabel'>Edu</span></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
</tr>
<tr>
<td class='rowlabel'>Mean (SD)</td>
<td>5.39 (2.78)</td>
<td>5.64 (2.72)</td>
</tr>
<tr>
<td class='rowlabel'>Median [Min, Max]</td>
<td>6.00 [0, 10.0]</td>
<td>7.00 [0, 10.0]</td>
</tr>
<tr>
<td class='rowlabel lastrow'>Missing</td>
<td class='lastrow'>80 (3.9%)</td>
<td class='lastrow'>65 (3.1%)</td>
</tr>
<tr>
<td class='rowlabel firstrow'><span class='varlabel'>Pol.Orient</span></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
</tr>
<tr>
<td class='rowlabel'>Mean (SD)</td>
<td>3.53 (1.39)</td>
<td>3.57 (1.37)</td>
</tr>
<tr>
<td class='rowlabel'>Median [Min, Max]</td>
<td>4.00 [1.00, 7.00]</td>
<td>4.00 [1.00, 7.00]</td>
</tr>
<tr>
<td class='rowlabel lastrow'>Missing</td>
<td class='lastrow'>116 (5.6%)</td>
<td class='lastrow'>63 (3.0%)</td>
</tr>
<tr>
<td class='rowlabel firstrow'><span class='varlabel'>Relid</span></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
</tr>
<tr>
<td class='rowlabel'>Mean (SD)</td>
<td>1.67 (2.57)</td>
<td>1.53 (2.56)</td>
</tr>
<tr>
<td class='rowlabel'>Median [Min, Max]</td>
<td>0 [0, 7.00]</td>
<td>0 [0, 7.00]</td>
</tr>
<tr>
<td class='rowlabel lastrow'>Missing</td>
<td class='lastrow'>44 (2.1%)</td>
<td class='lastrow'>99 (4.8%)</td>
</tr>
<tr>
<td class='rowlabel firstrow'><span class='varlabel'>BigDoms</span></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
</tr>
<tr>
<td class='rowlabel'>Buddhist</td>
<td>18 (0.9%)</td>
<td>19 (0.9%)</td>
</tr>
<tr>
<td class='rowlabel'>Christian</td>
<td>619 (29.9%)</td>
<td>557 (26.9%)</td>
</tr>
<tr>
<td class='rowlabel'>Muslim</td>
<td>7 (0.3%)</td>
<td>6 (0.3%)</td>
</tr>
<tr>
<td class='rowlabel'>Not_Rel</td>
<td>1322 (63.9%)</td>
<td>1375 (66.5%)</td>
</tr>
<tr>
<td class='rowlabel'>TheOthers</td>
<td>70 (3.4%)</td>
<td>66 (3.2%)</td>
</tr>
<tr>
<td class='rowlabel lastrow'>Missing</td>
<td class='lastrow'>32 (1.5%)</td>
<td class='lastrow'>45 (2.2%)</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Unfortunately, the <code>table1</code> package only prints html tables.</p>
<p>For publications, I might use the <code>modelsummary</code> package</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://vincentarelbundock.github.io/modelsummary/'>"modelsummary"</a></span><span class='op'>)</span>
<span class='va'>nnz</span><span class='op'>&lt;-</span><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>Age</span>, 
                <span class='va'>Male</span>,
                <span class='va'>BigDoms</span>,
                <span class='va'>Edu</span>,
                <span class='va'>GenCohort</span>,
                <span class='va'>Relid</span>,
                <span class='va'>Pol.Orient</span>,
                <span class='va'>Wave</span><span class='op'>)</span>
<span class='fu'>modelsummary</span><span class='fu'>::</span><span class='fu'><a href='https://vincentarelbundock.github.io/modelsummary/reference/datasummary_balance.html'>datasummary_balance</a></span><span class='op'>(</span> <span class='op'>~</span> <span class='va'>Wave</span>, data<span class='op'>=</span><span class='va'>nnz</span>, dinm<span class='op'>=</span><span class='cn'>FALSE</span>, output <span class='op'>=</span> <span class='st'>'table.tex'</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>I’ll put the <span class="math inline">\(LaTeX\)</span> output into my document because I generally prefer to write in <span class="math inline">\(LaTeX\)</span></p>
<p>However if you want to print inline, you can simply use:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://vincentarelbundock.github.io/modelsummary/'>"modelsummary"</a></span><span class='op'>)</span>
<span class='va'>nnz</span><span class='op'>&lt;-</span><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>Age</span>, 
                <span class='va'>Male</span>,
                <span class='va'>BigDoms</span>,
                <span class='va'>Edu</span>,
                <span class='va'>GenCohort</span>,
                <span class='va'>Relid</span>,
                <span class='va'>Pol.Orient</span>,
                <span class='va'>Wave</span><span class='op'>)</span>
<span class='fu'>modelsummary</span><span class='fu'>::</span><span class='fu'><a href='https://vincentarelbundock.github.io/modelsummary/reference/datasummary_balance.html'>datasummary_balance</a></span><span class='op'>(</span> <span class='op'>~</span> <span class='va'>Wave</span>, data<span class='op'>=</span><span class='va'>nnz</span>, dinm<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="2">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
2018 (N=2068)
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
2019 (N=2068)
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
Mean
</th>
<th style="text-align:left;">
Std. Dev.
</th>
<th style="text-align:left;">
Mean
</th>
<th style="text-align:left;">
Std. Dev.
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Age
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
50.1
</td>
<td style="text-align:left;">
13.5
</td>
<td style="text-align:left;">
51.8
</td>
<td style="text-align:left;">
13.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Edu
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
5.4
</td>
<td style="text-align:left;">
2.8
</td>
<td style="text-align:left;">
5.6
</td>
<td style="text-align:left;">
2.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Relid
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
1.7
</td>
<td style="text-align:left;">
2.6
</td>
<td style="text-align:left;">
1.5
</td>
<td style="text-align:left;">
2.6
</td>
</tr>
<tr>
<td style="text-align:left;box-shadow: 0px 1px">
Pol.Orient
</td>
<td style="text-align:left;box-shadow: 0px 1px">
</td>
<td style="text-align:left;box-shadow: 0px 1px">
3.5
</td>
<td style="text-align:left;box-shadow: 0px 1px">
1.4
</td>
<td style="text-align:left;box-shadow: 0px 1px">
3.6
</td>
<td style="text-align:left;box-shadow: 0px 1px">
1.4
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
N
</td>
<td style="text-align:left;">
%
</td>
<td style="text-align:left;">
N
</td>
<td style="text-align:left;">
%
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
772
</td>
<td style="text-align:left;">
37.3
</td>
<td style="text-align:left;">
772
</td>
<td style="text-align:left;">
37.3
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Not_Male
</td>
<td style="text-align:left;">
1290
</td>
<td style="text-align:left;">
62.4
</td>
<td style="text-align:left;">
1289
</td>
<td style="text-align:left;">
62.3
</td>
</tr>
<tr>
<td style="text-align:left;">
BigDoms
</td>
<td style="text-align:left;">
Buddhist
</td>
<td style="text-align:left;">
18
</td>
<td style="text-align:left;">
0.9
</td>
<td style="text-align:left;">
19
</td>
<td style="text-align:left;">
0.9
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Christian
</td>
<td style="text-align:left;">
619
</td>
<td style="text-align:left;">
29.9
</td>
<td style="text-align:left;">
557
</td>
<td style="text-align:left;">
26.9
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Muslim
</td>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
0.3
</td>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
0.3
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Not_Rel
</td>
<td style="text-align:left;">
1322
</td>
<td style="text-align:left;">
63.9
</td>
<td style="text-align:left;">
1375
</td>
<td style="text-align:left;">
66.5
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
TheOthers
</td>
<td style="text-align:left;">
70
</td>
<td style="text-align:left;">
3.4
</td>
<td style="text-align:left;">
66
</td>
<td style="text-align:left;">
3.2
</td>
</tr>
<tr>
<td style="text-align:left;">
GenCohort
</td>
<td style="text-align:left;">
Gen Boombers: born &gt;= 1946 &amp; b.&lt; 1961
</td>
<td style="text-align:left;">
693
</td>
<td style="text-align:left;">
33.5
</td>
<td style="text-align:left;">
693
</td>
<td style="text-align:left;">
33.5
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Gen_Silent: born&lt; 1946
</td>
<td style="text-align:left;">
50
</td>
<td style="text-align:left;">
2.4
</td>
<td style="text-align:left;">
50
</td>
<td style="text-align:left;">
2.4
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
GenX: born &gt;=1961 &amp; b.&lt; 1980
</td>
<td style="text-align:left;">
886
</td>
<td style="text-align:left;">
42.8
</td>
<td style="text-align:left;">
886
</td>
<td style="text-align:left;">
42.8
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
GenY: born &gt;=1980 &amp; b.&lt; 1996
</td>
<td style="text-align:left;">
387
</td>
<td style="text-align:left;">
18.7
</td>
<td style="text-align:left;">
387
</td>
<td style="text-align:left;">
18.7
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
GenZ: born &gt;= 1996
</td>
<td style="text-align:left;">
52
</td>
<td style="text-align:left;">
2.5
</td>
<td style="text-align:left;">
52
</td>
<td style="text-align:left;">
2.5
</td>
</tr>
</tbody>
</table>
</div>
<h3 id="create-a-table-using-pipe-functions">Create a table using pipe functions</h3>
<p>Above we saw how to create a clunky table using <code>table(x)</code>. However, R has lots of functionality to enable better.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://haozhu233.github.io/kableExtra/'>kableExtra</a></span><span class='op'>)</span>
<span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>k6cats</span>, <span class='va'>Wave</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>k6cats</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span> <span class='va'>Wave</span>, <span class='va'>k6cats</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarise</span><span class='op'>(</span>n <span class='op'>=</span> <span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/kbl.html'>kbl</a></span><span class='op'>(</span>caption <span class='op'>=</span> <span class='st'>"Distress by Year"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
   <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/kable_classic.html'>kable_classic_2</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"striped"</span>, <span class='st'>"hover"</span><span class='op'>)</span>, full_width <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/collapse_rows.html'>collapse_rows</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<table class=" lightable-classic-2 lightable-striped lightable-hover" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:designtable">Table 2: </span>Distress by Year
</caption>
<thead>
<tr>
<th style="text-align:left;">
Wave
</th>
<th style="text-align:left;">
k6cats
</th>
<th style="text-align:right;">
n
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: middle !important;" rowspan="3">
2018
</td>
<td style="text-align:left;">
Low Distress
</td>
<td style="text-align:right;">
1296
</td>
</tr>
<tr>
<td style="text-align:left;">
Moderate Distress
</td>
<td style="text-align:right;">
673
</td>
</tr>
<tr>
<td style="text-align:left;">
Serious Distress
</td>
<td style="text-align:right;">
84
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: middle !important;" rowspan="3">
2019
</td>
<td style="text-align:left;">
Low Distress
</td>
<td style="text-align:right;">
1264
</td>
</tr>
<tr>
<td style="text-align:left;">
Moderate Distress
</td>
<td style="text-align:right;">
699
</td>
</tr>
<tr>
<td style="text-align:left;">
Serious Distress
</td>
<td style="text-align:right;">
88
</td>
</tr>
</tbody>
</table>
</div>
<p>Note that we can use the <code>pivot_wider</code> function to spread the dataframe to enable a table that is easier to interpret.</p>
<p>Credit where credit is due: I just learned about <code>pivot_wider</code> from Johannes and Thorven. I’m keen to get <code>pivot_longer</code> and <code>pivot_wider</code> into my vocabulary, and to do more things, like this:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>k6cats</span>, <span class='va'>Wave</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>k6cats</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span> <span class='va'>Wave</span>, <span class='va'>k6cats</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarise</span><span class='op'>(</span>n <span class='op'>=</span> <span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
 <span class='fu'>pivot_wider</span><span class='op'>(</span>names_from <span class='op'>=</span> <span class='va'>Wave</span>, values_from <span class='op'>=</span> <span class='va'>n</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
   <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/kbl.html'>kbl</a></span><span class='op'>(</span>caption <span class='op'>=</span> <span class='st'>"Distress counts by year"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
   <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/kable_classic.html'>kable_classic_2</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"striped"</span>, <span class='st'>"hover"</span><span class='op'>)</span>, full_width <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<table class=" lightable-classic-2 lightable-striped lightable-hover" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-31">Table 3: </span>Distress counts by year
</caption>
<thead>
<tr>
<th style="text-align:left;">
k6cats
</th>
<th style="text-align:right;">
2018
</th>
<th style="text-align:right;">
2019
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Low Distress
</td>
<td style="text-align:right;">
1296
</td>
<td style="text-align:right;">
1264
</td>
</tr>
<tr>
<td style="text-align:left;">
Moderate Distress
</td>
<td style="text-align:right;">
673
</td>
<td style="text-align:right;">
699
</td>
</tr>
<tr>
<td style="text-align:left;">
Serious Distress
</td>
<td style="text-align:right;">
84
</td>
<td style="text-align:right;">
88
</td>
</tr>
</tbody>
</table>
</div>
<p>Nice!</p>
<h3 id="bar-graphs">Bar graphs</h3>
<p>For categorical data, in place of tables we can use bar graphs</p>
<p>Here’s the table:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>nz</span><span class='op'>$</span><span class='va'>BigDoms</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>
 Buddhist Christian    Muslim   Not_Rel TheOthers 
       37      1176        13      2697       136 </code></pre>
</div>
<p>Here’s the bar graph:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>nz</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>BigDoms</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/unnamed-chunk-33-1.png" width="624" /></p>
</div>
<p>Note that we can re-order the factor levels to produce a nicer output, using <code>fct_infreq</code></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>nz</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_inorder.html'>fct_infreq</a></span><span class='op'>(</span><span class='va'>BigDoms</span><span class='op'>)</span><span class='op'>)</span>  <span class='op'>)</span>
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/unnamed-chunk-34-1.png" width="624" /></p>
</div>
<h3 id="missing-data-graphs">Missing data graphs</h3>
<p>What do you notice about the patterns of missingness in this graph?</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://github.com/njtierney/naniar'>"naniar"</a></span><span class='op'>)</span>
<span class='fu'>naniar</span><span class='fu'>::</span><span class='fu'><a href='http://visdat.njtierney.com//reference/vis_miss.html'>vis_miss</a></span><span class='op'>(</span><span class='va'>nz</span><span class='op'>)</span> <span class='co'>#What do you notice? </span>
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/unnamed-chunk-35-1.png" width="624" /></p>
</div>
<p>Here, we find all the problem cases:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/naniar/man/gg_miss_upset.html'>gg_miss_upset</a></span><span class='op'>(</span><span class='va'>nz</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/unnamed-chunk-36-1.png" width="624" /></p>
</div>
<p>What explains these feature of missingess?</p>
<h3 id="boxplots">Boxplots</h3>
<p>A box plot provides visual information for the following statistics:</p>
<ul>
<li>Minimum – (0p) min outlier</li>
<li>Maximum – (100p) max outlier</li>
<li>Median – (50th p)</li>
<li>First Quartile (Q1 or 25p)</li>
<li>Third Quartile (Q3 or 75p)</li>
<li>Interquartile range (IQR), whcih is the distance between Q1 and Q3<br />
</li>
<li>Optional: the notch displays a confidence interval around the median. This is +/- 1.58 X IQR/sqrt(n). We use notches to compare differences between groups; overlap implies uncertainty about whether the medians differ.</li>
</ul>
<p>There’s a simple explanation <a href="https://towardsdatascience.com/understanding-boxplots-5e2df7bcbd51">here</a></p>
<p>We can use base R to investigate differences in distress among big denominations:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># using base R</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/boxplot.html'>boxplot</a></span><span class='op'>(</span><span class='va'>KESSLER6sum</span> <span class='op'>~</span> <span class='va'>BigDoms</span>, data <span class='op'>=</span> <span class='va'>nz</span>, notch <span class='op'>=</span> <span class='cn'>TRUE</span>, col <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"cadetblue1"</span>,<span class='st'>"orange"</span>,<span class='st'>"red"</span>,<span class='st'>"darkblue"</span>,<span class='st'>"brown"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/unnamed-chunk-37-1.png" width="624" /></p>
</div>
<p>Here’s a ggplot boxplot:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>nz</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>KESSLER6sum</span>, y <span class='op'>=</span> <span class='va'>BigDoms</span>, fill <span class='op'>=</span> <span class='va'>BigDoms</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot</a></span><span class='op'>(</span>notch<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_viridis.html'>scale_fill_viridis_d</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"If the notches don't overlap, there's likely a difference"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>.05</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/unnamed-chunk-38-1.png" width="624" /></p>
</div>
<p>Here’s a ggplot2 boxplot with points overlaid, and jittered. This allows us to se the differences in sample sizes</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>nz</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>KESSLER6sum</span>, y <span class='op'>=</span> <span class='va'>BigDoms</span>, fill <span class='op'>=</span> <span class='va'>BigDoms</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot</a></span><span class='op'>(</span>notch<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_viridis.html'>scale_fill_viridis_d</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"If the notches don't overlap, there's likely a difference"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>.07</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/unnamed-chunk-39-1.png" width="624" /></p>
</div>
<p>We could look at differences by wave:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>nz</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>KESSLER6sum</span>, y <span class='op'>=</span> <span class='va'>BigDoms</span>, fill <span class='op'>=</span> <span class='va'>BigDoms</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot</a></span><span class='op'>(</span>notch<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_viridis.html'>scale_fill_viridis_d</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
   <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>.07</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span><span class='va'>Wave</span> <span class='op'>~</span> <span class='va'>.</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"If the notches don't overlap, there's likely a difference"</span><span class='op'>)</span> 
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/unnamed-chunk-40-1.png" width="624" /></p>
</div>
<h3 id="correlation-graphs">Correlation graphs</h3>
<p>Johannes will describe a method for making a correlation plot. Here is another method.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bzsec</span><span class='op'>&lt;-</span><span class='va'>nz</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span>
    <span class='va'>Your.Future.Security</span>,
    <span class='va'>Standard.Living</span>,
    <span class='va'>NZ.Economic.Situation</span>,
    <span class='va'>NZ.Business.Conditions</span>,
    <span class='va'>Emp.JobSecure</span>,
    <span class='va'>CharityDonate</span>,
    <span class='va'>Id</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate_all</span><span class='op'>(</span><span class='va'>.</span>, <span class='va'>as.numeric</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='co'>#make numeric </span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>Id <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>Id</span><span class='op'>)</span>,
         CharityDonate <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>CharityDonate</span> <span class='op'>+</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span><span class='co'># make Id a factor for the </span>

<span class='co'># make a correlation plot using the "correlation" package from easystates</span>

<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://easystats.github.io/correlation/'>correlation</a></span><span class='op'>)</span>
<span class='va'>p1</span><span class='op'>&lt;-</span><span class='va'>bzsec</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://easystats.github.io/correlation/reference/correlation.html'>correlation</a></span><span class='op'>(</span>partial <span class='op'>=</span> <span class='cn'>FALSE</span>, multilevel <span class='op'>=</span> <span class='cn'>TRUE</span> <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Print summary</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bzsec</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://easystats.github.io/correlation/reference/correlation.html'>correlation</a></span><span class='op'>(</span>partial <span class='op'>=</span> <span class='cn'>FALSE</span>, multilevel <span class='op'>=</span> <span class='cn'>TRUE</span> <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Parameter              | CharityDonate | Emp.JobSecure | NZ.Business.Conditions | NZ.Economic.Situation | Standard.Living
-------------------------------------------------------------------------------------------------------------------------
Your.Future.Security   |       0.10*** |       0.22*** |                0.47*** |               0.32*** |         0.38***
Standard.Living        |       0.09*** |       0.16*** |                0.26*** |               0.30*** |                
NZ.Economic.Situation  |       0.07*** |       0.10*** |                0.43*** |                       |                
NZ.Business.Conditions |          0.04 |       0.13*** |                        |                       |                
Emp.JobSecure          |          0.03 |               |                        |                       |                </code></pre>
</div>
<p>Let’s set multilevel to <code>FALSE</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://easystats.github.io/correlation/'>correlation</a></span><span class='op'>)</span>
<span class='va'>p2</span><span class='op'>&lt;-</span><span class='va'>bzsec</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>Id</span><span class='op'>)</span><span class='op'>%&gt;%</span> <span class='co'># get rid of grouping variable</span>
  <span class='fu'><a href='https://easystats.github.io/correlation/reference/correlation.html'>correlation</a></span><span class='op'>(</span>partial <span class='op'>=</span> <span class='cn'>FALSE</span>, multilevel <span class='op'>=</span> <span class='cn'>FALSE</span> <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='co'>#print summary</span>
<span class='va'>bzsec</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>Id</span><span class='op'>)</span><span class='op'>%&gt;%</span> <span class='co'># get rid of grouping variable</span>
  <span class='fu'><a href='https://easystats.github.io/correlation/reference/correlation.html'>correlation</a></span><span class='op'>(</span>partial <span class='op'>=</span> <span class='cn'>FALSE</span>, multilevel <span class='op'>=</span> <span class='cn'>FALSE</span> <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># Correlation Matrix (pearson-method)

Parameter              | CharityDonate | Emp.JobSecure | NZ.Business.Conditions | NZ.Economic.Situation | Standard.Living
-------------------------------------------------------------------------------------------------------------------------
Your.Future.Security   |       0.22*** |       0.31*** |                0.53*** |               0.42*** |         0.53***
Standard.Living        |       0.25*** |       0.26*** |                0.32*** |               0.36*** |                
NZ.Economic.Situation  |       0.12*** |       0.14*** |                0.52*** |                       |                
NZ.Business.Conditions |       0.10*** |       0.20*** |                        |                       |                
Emp.JobSecure          |       0.10*** |               |                        |                       |                

p-value adjustment method: Holm (1979)</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://patchwork.data-imaginist.com'>patchwork</a></span><span class='op'>)</span>
<span class='co'># create a two panel plot</span>
<span class='va'>p1</span> <span class='op'>/</span> <span class='va'>p2</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://patchwork.data-imaginist.com/reference/plot_annotation.html'>plot_annotation</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Plot of multilevel (a) and single-level (b) correlation"</span>, tag_levels <span class='op'>=</span> <span class='st'>'a'</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="lecture_4_files/figure-html5/unnamed-chunk-44-1.png" width="960" /></p>
</div>
<p>We can see an even greater correlations between the variables. This is because the model does not adjust for the repeated measures, which create dependencies in the data.</p>
<h3 id="the-report-package">The <code>report</code> package</h3>
<p>The reports package from the <code>easystats</code> group is powerful tool for saving tame. Before extolling its virtues, I’d like to point out two major limitations.</p>
<p>First, the package is in development. Currently, it has lots of bugs.</p>
<p>Second, the package uses terminology that won’t work for all contexts and purposes. For example, it uses the term “significant” to describe p values that are below the traditional p = .05 threshold.</p>
<p>If you learn nothing else from this course, you should learn never to use “significant” to describe a p value. You may, if you like, use “statistically signficant” however it would be better altogether if you simply dropped p-values from data analysis. We’ll show you how. With those provisos in mind, consider some useful functionality from the <code>report</code> package.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># create a demographic dataframe</span>
<span class='va'>nz_demagraphics</span> <span class='op'>&lt;-</span> <span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>Age</span>, <span class='va'>GenCohort</span>, <span class='va'>Male</span>, <span class='va'>Edu</span>, <span class='va'>Pol.Orient</span>, <span class='va'>Relid</span>, <span class='va'>BigDoms</span>, <span class='va'>Wave</span><span class='op'>)</span>

<span class='co'># now a nice way to save you time when reporting</span>
<span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span>
  <span class='fu'>report</span><span class='fu'>::</span><span class='fu'><a href='https://easystats.github.io/report/reference/report_participants.html'>report_participants</a></span><span class='op'>(</span>
    <span class='va'>nz_demagraphics</span>, 
    group <span class='op'>=</span> <span class='st'>"Wave"</span>, 
    age <span class='op'>=</span> <span class='st'>"Age"</span>,
    sex <span class='op'>=</span> <span class='st'>"Male"</span>,
    education <span class='op'>=</span> <span class='st'>"Edu"</span>,
    spell_n <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>,
  <span class='st'>"were recruited in the study by through enticement by lollipops. Those who did not volunteer were coerced."</span>
  <span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;For the &#39;Wave - 2018&#39; group: Two Thousand, Sixty Eight participants (Mean age = 50.1, SD = 13.5, range: [18, 90]; 0.0% females; Mean education = 5.4, SD = 2.8, range: [0, 10]) and for the &#39;Wave - 2019&#39; group: Two Thousand, Sixty Eight participants (Mean age = 51.8, SD = 13.4, range: [19.6, 91.08]; 0.0% females; Mean education = 5.6, SD = 2.7, range: [0, 10]) were recruited in the study by through enticement by lollipops. Those who did not volunteer were coerced.&quot;</code></pre>
</div>
<p>The table function of <code>report</code> isn’t great yet. However it has some nice features. For example you should always report your session information, and doing so in tabluar form clarifies the elements</p>
<p>Try running the following code on your own:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://easystats.github.io/report/reference/report_table.html'>report_table</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/utils/sessionInfo.html'>sessionInfo</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>r</span>
</code></pre>
</div>
</div>
<p>Here is another method, which you can try on your own</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://easystats.github.io/report/reference/report.sessionInfo.html'>cite_packages</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Here’s a demographic table (try on your own)</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://easystats.github.io/report/reference/report_table.html'>report_table</a></span><span class='op'>(</span><span class='va'>nz_demagraphics</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Here’s a data summary</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://easystats.github.io/report/'>"report"</a></span><span class='op'>)</span>
<span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>Wave</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span>
    <span class='st'>"Wave"</span>, 
    <span class='st'>"Age"</span>,
    <span class='st'>"Male"</span>,
    <span class='st'>"Edu"</span>,
    <span class='st'>"Relid"</span>,
    <span class='st'>"Pol.Orient"</span>,
    <span class='st'>"KESSLER6sum"</span>,
    <span class='st'>"FeelHopeless"</span>,
    <span class='st'>"FeelDepressed"</span>,
    <span class='st'>"FeelRestless"</span>,
    <span class='st'>"EverythingIsEffort"</span>,
    <span class='st'>"FeelWorthless"</span>,
    <span class='st'>"FeelNervous"</span>
    <span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://easystats.github.io/report/reference/report.html'>report</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>The data contains 4136 observations, grouped by Wave, of the following variables:

- 2018 (n = 2068):
  - Age: Mean = 50.07, SD = 13.49, range: [18, 90]
  - Male: 2 levels, namely Male (n = 772), Not_Male (n = 1290) and missing (n = 6)
  - Edu: Mean = 5.39, SD = 2.78, range: [0, 10], 3.87% missing
  - Relid: Mean = 1.67, SD = 2.57, range: [0, 7], 2.13% missing
  - Pol.Orient: Mean = 3.53, SD = 1.39, range: [1, 7], 5.61% missing
  - KESSLER6sum: Mean = 5.07, SD = 3.93, range: [0, 23], 0.73% missing
  - FeelHopeless: 5 levels, namely None Of The Time (n = 1046), A Little Of The Time (n = 600), Some Of The Time (n = 338), Most Of The Time (n = 54), All Of The Time (n = 4) and missing (n = 26)
  - FeelDepressed: 5 levels, namely None Of The Time (n = 1469), A Little Of The Time (n = 361), Some Of The Time (n = 170), Most Of The Time (n = 43), All Of The Time (n = 5) and missing (n = 20)
  - FeelRestless: 5 levels, namely None Of The Time (n = 535), A Little Of The Time (n = 763), Some Of The Time (n = 594), Most Of The Time (n = 138), All Of The Time (n = 16) and missing (n = 22)
  - EverythingIsEffort: 5 levels, namely None Of The Time (n = 551), A Little Of The Time (n = 795), Some Of The Time (n = 501), Most Of The Time (n = 158), All Of The Time (n = 40) and missing (n = 23)
  - FeelWorthless: 5 levels, namely None Of The Time (n = 1433), A Little Of The Time (n = 356), Some Of The Time (n = 186), Most Of The Time (n = 67), All Of The Time (n = 7) and missing (n = 19)
  - FeelNervous: 5 levels, namely None Of The Time (n = 620), A Little Of The Time (n = 789), Some Of The Time (n = 482), Most Of The Time (n = 146), All Of The Time (n = 13) and missing (n = 18)

- 2019 (n = 2068):
  - Age: Mean = 51.83, SD = 13.45, range: [19.55, 91.08]
  - Male: 2 levels, namely Male (n = 772), Not_Male (n = 1289) and missing (n = 7)
  - Edu: Mean = 5.64, SD = 2.72, range: [0, 10], 3.14% missing
  - Relid: Mean = 1.53, SD = 2.56, range: [0, 7], 4.79% missing
  - Pol.Orient: Mean = 3.57, SD = 1.37, range: [1, 7], 3.05% missing
  - KESSLER6sum: Mean = 5.20, SD = 4.01, range: [0, 22], 0.82% missing
  - FeelHopeless: 5 levels, namely None Of The Time (n = 977), A Little Of The Time (n = 639), Some Of The Time (n = 349), Most Of The Time (n = 79), All Of The Time (n = 4) and missing (n = 20)
  - FeelDepressed: 5 levels, namely None Of The Time (n = 1434), A Little Of The Time (n = 377), Some Of The Time (n = 193), Most Of The Time (n = 35), All Of The Time (n = 5) and missing (n = 24)
  - FeelRestless: 5 levels, namely None Of The Time (n = 517), A Little Of The Time (n = 757), Some Of The Time (n = 608), Most Of The Time (n = 146), All Of The Time (n = 15) and missing (n = 25)
  - EverythingIsEffort: 5 levels, namely None Of The Time (n = 544), A Little Of The Time (n = 804), Some Of The Time (n = 502), Most Of The Time (n = 156), All Of The Time (n = 35) and missing (n = 27)
  - FeelWorthless: 5 levels, namely None Of The Time (n = 1407), A Little Of The Time (n = 375), Some Of The Time (n = 195), Most Of The Time (n = 60), All Of The Time (n = 9) and missing (n = 22)
  - FeelNervous: 5 levels, namely None Of The Time (n = 568), A Little Of The Time (n = 850), Some Of The Time (n = 468), Most Of The Time (n = 133), All Of The Time (n = 24) and missing (n = 25)</code></pre>
</div>
<p>Notes:</p>
<p>More about the report package: <a href="https://easystats.github.io/report/index.html">here</a></p>
<p>This package is brought to you by <a href="https://github.com/easystats/easystats">easystats</a></p>
<h3 id="measures">Measures</h3>
<p>When reporting your study, it is extremely important to include information about your measure. For example:</p>
<p>We measure psychological distress using the Kessler-6 scale <span class="citation" data-cites="Kessler2002-ex">(<a href="#ref-Kessler2002-ex" role="doc-biblioref">R. C. Kessler et al. 2002</a>)</span>, which exhibits strong diagnostic concordance for moderate and severe psychological distress in large, cross-cultural samples <span class="citation" data-cites="Kessler2010-xi"><a href="#ref-Prochaska2012-dy" role="doc-biblioref">Prochaska et al.</a> (<a href="#ref-Prochaska2012-dy" role="doc-biblioref">2012</a>)</span>. Participants rated during the past 30 days, how often did… (a) “<span class="math inline">\(\dots\)</span> you feel hopeless”; (b) “<span class="math inline">\(\dots\)</span> you feel so depressed that nothing could cheer you up”; (c) <span class="math inline">\(\dots\)</span> you feel restless or fidgety”; (d)“<span class="math inline">\(\dots\)</span> you feel that everything was an effort”; (e) “<span class="math inline">\(\dots\)</span> you feel worthless”; (f) “<span class="math inline">\(\dots\)</span> you feel nervous?” Ordinal response alternatives for the Kessler-6 are: “None of the time”; “A little of the time”; “Some of the time”; “Most of the time”; “All of the time.”</p>
<p>We report sample descriptive statistics for indicators of personal Kessler-6 distress below in <a href="#k6tab">Table</a>1.</p>
<strong>Table 1</strong><a id="k6tab"></a>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/ddsjoberg/gtsummary'>gtsummary</a></span><span class='op'>)</span>
<span class='va'>tb1</span> <span class='op'>&lt;-</span><span class='va'>nz</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span>
    <span class='va'>KESSLER6sum</span>,
    <span class='va'>FeelHopeless</span>,
    <span class='va'>FeelDepressed</span>,
    <span class='va'>FeelRestless</span>,
    <span class='va'>EverythingIsEffort</span>,
    <span class='va'>FeelWorthless</span>,
    <span class='va'>FeelNervous</span>,
    <span class='va'>Wave</span>,
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>gtsummary</span><span class='fu'>::</span><span class='fu'><a href='http://www.danieldsjoberg.com/gtsummary//reference/tbl_summary.html'>tbl_summary</a></span><span class='op'>(</span>
    by <span class='op'>=</span> <span class='va'>Wave</span>,
    statistic <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
      <span class='fu'><a href='http://www.danieldsjoberg.com/gtsummary//reference/select_helpers.html'>all_continuous</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>"{mean} ({sd})"</span>,
      <span class='fu'><a href='http://www.danieldsjoberg.com/gtsummary//reference/select_helpers.html'>all_categorical</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>~</span> <span class='st'>"{n} / {N} ({p}%)"</span>
    <span class='op'>)</span>,
    digits <span class='op'>=</span> <span class='fu'><a href='http://www.danieldsjoberg.com/gtsummary//reference/select_helpers.html'>all_continuous</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>~</span> <span class='fl'>2</span>,
    missing_text <span class='op'>=</span> <span class='st'>"(Missing)"</span>
  <span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'><a href='http://www.danieldsjoberg.com/gtsummary//reference/bold_italicize_labels_levels.html'>bold_labels</a></span><span class='op'>(</span><span class='op'>)</span> 
<span class='va'>tb1</span>
</code></pre>
</div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#myqyvvhdwo .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#myqyvvhdwo .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#myqyvvhdwo .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#myqyvvhdwo .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#myqyvvhdwo .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#myqyvvhdwo .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#myqyvvhdwo .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#myqyvvhdwo .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#myqyvvhdwo .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#myqyvvhdwo .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#myqyvvhdwo .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#myqyvvhdwo .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#myqyvvhdwo .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#myqyvvhdwo .gt_from_md > :first-child {
  margin-top: 0;
}

#myqyvvhdwo .gt_from_md > :last-child {
  margin-bottom: 0;
}

#myqyvvhdwo .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#myqyvvhdwo .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#myqyvvhdwo .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#myqyvvhdwo .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#myqyvvhdwo .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#myqyvvhdwo .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#myqyvvhdwo .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#myqyvvhdwo .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#myqyvvhdwo .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#myqyvvhdwo .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#myqyvvhdwo .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#myqyvvhdwo .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#myqyvvhdwo .gt_left {
  text-align: left;
}

#myqyvvhdwo .gt_center {
  text-align: center;
}

#myqyvvhdwo .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#myqyvvhdwo .gt_font_normal {
  font-weight: normal;
}

#myqyvvhdwo .gt_font_bold {
  font-weight: bold;
}

#myqyvvhdwo .gt_font_italic {
  font-style: italic;
}

#myqyvvhdwo .gt_super {
  font-size: 65%;
}

#myqyvvhdwo .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="myqyvvhdwo" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>2018</strong>, N = 2,068<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>2019</strong>, N = 2,068<sup class="gt_footnote_marks">1</sup></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">KESSLER6sum</td>
      <td class="gt_row gt_center">5.07 (3.93)</td>
      <td class="gt_row gt_center">5.20 (4.01)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">(Missing)</td>
      <td class="gt_row gt_center">15</td>
      <td class="gt_row gt_center">17</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">FeelHopeless</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">None Of The Time</td>
      <td class="gt_row gt_center">1,046 / 2,042 (51%)</td>
      <td class="gt_row gt_center">977 / 2,048 (48%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">A Little Of The Time</td>
      <td class="gt_row gt_center">600 / 2,042 (29%)</td>
      <td class="gt_row gt_center">639 / 2,048 (31%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Some Of The Time</td>
      <td class="gt_row gt_center">338 / 2,042 (17%)</td>
      <td class="gt_row gt_center">349 / 2,048 (17%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Most Of The Time</td>
      <td class="gt_row gt_center">54 / 2,042 (2.6%)</td>
      <td class="gt_row gt_center">79 / 2,048 (3.9%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">All Of The Time</td>
      <td class="gt_row gt_center">4 / 2,042 (0.2%)</td>
      <td class="gt_row gt_center">4 / 2,048 (0.2%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">(Missing)</td>
      <td class="gt_row gt_center">26</td>
      <td class="gt_row gt_center">20</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">FeelDepressed</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">None Of The Time</td>
      <td class="gt_row gt_center">1,469 / 2,048 (72%)</td>
      <td class="gt_row gt_center">1,434 / 2,044 (70%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">A Little Of The Time</td>
      <td class="gt_row gt_center">361 / 2,048 (18%)</td>
      <td class="gt_row gt_center">377 / 2,044 (18%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Some Of The Time</td>
      <td class="gt_row gt_center">170 / 2,048 (8.3%)</td>
      <td class="gt_row gt_center">193 / 2,044 (9.4%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Most Of The Time</td>
      <td class="gt_row gt_center">43 / 2,048 (2.1%)</td>
      <td class="gt_row gt_center">35 / 2,044 (1.7%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">All Of The Time</td>
      <td class="gt_row gt_center">5 / 2,048 (0.2%)</td>
      <td class="gt_row gt_center">5 / 2,044 (0.2%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">(Missing)</td>
      <td class="gt_row gt_center">20</td>
      <td class="gt_row gt_center">24</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">FeelRestless</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">None Of The Time</td>
      <td class="gt_row gt_center">535 / 2,046 (26%)</td>
      <td class="gt_row gt_center">517 / 2,043 (25%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">A Little Of The Time</td>
      <td class="gt_row gt_center">763 / 2,046 (37%)</td>
      <td class="gt_row gt_center">757 / 2,043 (37%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Some Of The Time</td>
      <td class="gt_row gt_center">594 / 2,046 (29%)</td>
      <td class="gt_row gt_center">608 / 2,043 (30%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Most Of The Time</td>
      <td class="gt_row gt_center">138 / 2,046 (6.7%)</td>
      <td class="gt_row gt_center">146 / 2,043 (7.1%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">All Of The Time</td>
      <td class="gt_row gt_center">16 / 2,046 (0.8%)</td>
      <td class="gt_row gt_center">15 / 2,043 (0.7%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">(Missing)</td>
      <td class="gt_row gt_center">22</td>
      <td class="gt_row gt_center">25</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">EverythingIsEffort</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">None Of The Time</td>
      <td class="gt_row gt_center">551 / 2,045 (27%)</td>
      <td class="gt_row gt_center">544 / 2,041 (27%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">A Little Of The Time</td>
      <td class="gt_row gt_center">795 / 2,045 (39%)</td>
      <td class="gt_row gt_center">804 / 2,041 (39%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Some Of The Time</td>
      <td class="gt_row gt_center">501 / 2,045 (24%)</td>
      <td class="gt_row gt_center">502 / 2,041 (25%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Most Of The Time</td>
      <td class="gt_row gt_center">158 / 2,045 (7.7%)</td>
      <td class="gt_row gt_center">156 / 2,041 (7.6%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">All Of The Time</td>
      <td class="gt_row gt_center">40 / 2,045 (2.0%)</td>
      <td class="gt_row gt_center">35 / 2,041 (1.7%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">(Missing)</td>
      <td class="gt_row gt_center">23</td>
      <td class="gt_row gt_center">27</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">FeelWorthless</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">None Of The Time</td>
      <td class="gt_row gt_center">1,433 / 2,049 (70%)</td>
      <td class="gt_row gt_center">1,407 / 2,046 (69%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">A Little Of The Time</td>
      <td class="gt_row gt_center">356 / 2,049 (17%)</td>
      <td class="gt_row gt_center">375 / 2,046 (18%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Some Of The Time</td>
      <td class="gt_row gt_center">186 / 2,049 (9.1%)</td>
      <td class="gt_row gt_center">195 / 2,046 (9.5%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Most Of The Time</td>
      <td class="gt_row gt_center">67 / 2,049 (3.3%)</td>
      <td class="gt_row gt_center">60 / 2,046 (2.9%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">All Of The Time</td>
      <td class="gt_row gt_center">7 / 2,049 (0.3%)</td>
      <td class="gt_row gt_center">9 / 2,046 (0.4%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">(Missing)</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">22</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">FeelNervous</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">None Of The Time</td>
      <td class="gt_row gt_center">620 / 2,050 (30%)</td>
      <td class="gt_row gt_center">568 / 2,043 (28%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">A Little Of The Time</td>
      <td class="gt_row gt_center">789 / 2,050 (38%)</td>
      <td class="gt_row gt_center">850 / 2,043 (42%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Some Of The Time</td>
      <td class="gt_row gt_center">482 / 2,050 (24%)</td>
      <td class="gt_row gt_center">468 / 2,043 (23%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Most Of The Time</td>
      <td class="gt_row gt_center">146 / 2,050 (7.1%)</td>
      <td class="gt_row gt_center">133 / 2,043 (6.5%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">All Of The Time</td>
      <td class="gt_row gt_center">13 / 2,050 (0.6%)</td>
      <td class="gt_row gt_center">24 / 2,043 (1.2%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">(Missing)</td>
      <td class="gt_row gt_center">18</td>
      <td class="gt_row gt_center">25</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="3">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          Mean (SD); n / N (%)
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>
</div>
<p>Note that you can use the <code>gtsummary</code> package to create in-line referencing. For example: Average Kessler-6 distress in 2018 was 5.07 (3.93) and in 2019 was 5.20 (4.01).</p>
<h3 id="order-of-your-method-section">Order of your Method section</h3>
<p>The following is a brief guide to describing your method. We’ll be returning to report writing in future weeks. For now, I just want to put this on the table for you. The advice is just a guide.</p>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Heading</strong></td>
<td>Include</td>
</tr>
<tr class="even">
<td>Participants</td>
<td><ul>
<li>Participant or subject characteristics</li>
</ul>
<!-- -->
<ul>
<li><p>Sampling procedures</p></li>
<li><p>Sample size and power</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Materials</td>
<td><ul>
<li><p>Primary and secondary measures</p></li>
<li><p>Quality of measurements</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Procedure</td>
<td><ul>
<li><p><a href="https://www.scribbr.com/methodology/data-collection/">Data collection methods</a></p></li>
<li><p>Research design (e.g., experimental, correlational, or descriptive)</p></li>
<li><p>Data processing and diagnostics (e.g., outlier removal)</p></li>
<li><p>Data analysis strategy (e.g., comparison or regression tests)</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>Below are the sampling procedures from the New Zealand Attitudes and Values Study, from where the <code>nz</code> teaching dataset was drawn.</p>
<h2 id="appendix-1a-sampling-procedure-nzavs-time-10-2018-conducted-from-18.06.2018-28.09.2019">Appendix 1A Sampling Procedure – NZAVS Time 10 (2018; conducted from 18.06.2018-28.09.2019)</h2>
<p>The Time 10 (2018) NZAVS contained responses from 47,951 participants (18,010 retained from one or more previous wave. The sample retained 2,964 participants from the Time 1 (2009) sample (a retention rate of 45.5%). The sample retained 14,049 participants from Time 9 (2017; a retention rate of 82.3% from the previous year). Participants who provided an email address were first emailed and invited to complete an online version if they preferred. Participants who did not complete the online version (or did not provide an email) were then posted a copy of the questionnaire, with a second postal follow-up two months later. We staggered the time of contact, so that participants who had completed the previous wave were contacted approximately one year after they last completed the questionnaire. We offered a prize draw for participation (five draws each for $1000 grocery vouchers, $5000 total prize pool). All participants were posted a Season’s Greetings card from the NZAVS research team and informed that they had been automatically entered into a bonus seasonal grocery voucher prize draw. Participants were also emailed an eight-page newsletter about the study.</p>
<p>To boost sample size and increase sample diversity for subsequent waves, a booster sample was conducted by selecting people from the New Zealand electoral roll. As with previous booster samples, sampling was conducted without replacement (i.e., people included in previous sample frames were identified and removed from the 2018 roll). The sample frame consisted of 325,000 people aged from 18-65 randomly selected from the 2018 New Zealand Electoral Roll, who were currently residing in New Zealand (one can be registered to vote in New Zealand but living overseas). The electoral roll contained ~3,250,000 registered voters. The New Zealand Electoral Roll contains participants’ date of birth (within a one-year window), and we limited our frame to people who 65 or younger, due to our aim of retaining participants longitudinally. We concurrently advertised the survey on Facebook via a $5000 paid promotion of a link to a YouTube video describing the NZAVS and the large booster sample we were conducting. The advertisement targeted men and women aged 18-65+ who lived in New Zealand and ran for 14 days. This paid promotion reached 147,296 people, with 4,721 link clicks (i.e., clicking to watch the video), according to Facebook. The goal of the paid promotion was twofold: (a) to increase name recognition of the NZAVS during the period in which questionnaires were being posted, and (b) to help improve retention by potentially reaching previous participants who happened to see the advertisement. A total of 29,293 participants who were contained in our sample frame completed the questionnaire (response rate = 9.2% when adjusting for the 98.2% accuracy of the 2018 electoral roll). A further 648 participants completed the questionnaire, but were unable to be matched to our sample frame (for example, due to a lack of contact information) or were unsolicited opt-ins. Informal analysis indicates that unsolicited opt-ins were often the partners of existing participants.</p>
<h2 id="appendix-1b-sampling-procedure-nzavs-time-11-2019-conducted-from-29.09.2019-17.10.2020">Appendix 1B Sampling Procedure – NZAVS Time 11 (2019; conducted from 29.09.2019-17.10.2020)</h2>
<p>The Time 11 wave was conducted during COVID-19 pandemic. Procedures thus differed in that there was an increased focus on online deliver using email reminders and extensive Facebook advertising, no Christmas card, and incomplete phoning of non-respondents.</p>
<p>The Time 11 (2019) NZAVS contained responses from 42,684 participants (36,522 retained from one or more previous wave. The sample retained 2,506 participants from the Time 1 (2009) sample (a retention rate of 38.4%). The sample retained 34,782 participants from Time 10 (2018; a retention rate of 72.5% from the previous year). Participants who provided an email address were first emailed and invited to complete an online version if they preferred. Participants who did not complete the online version (or did not provide an email) were then posted a copy of the questionnaire, with a second postal follow-up two months later. We staggered the time of contact, so that participants who had completed the previous wave were contacted approximately one year after they last completed the questionnaire. A second reminder email was sent approximately four months following the first email attempt. We offered a prize draw for participation (five draws each for $1000 grocery vouchers, $5000 total prize pool). Participants were also emailed an eight-page newsletter about the study. As in past years, three attempts were made to phone non-respondents using each available cell and landline number. However, due to the university closure during COVID-19 lockdowns, phoning attempts were made for only 54% of the phoning pool (11,687 from a total of 21,636 non-respondents who provided at least one phone number).</p>
<p>Two additional forms of recruitment were also introduced during Time 11. The first was a large information box in the questionnaire (taking a full page on the paper version), which asked people: ‘Do you have a partner who would also like to join the NZAVS?’ with additional details for how partners might join the study (see questionnaire for the full text). The second was a Facebook advertisement. The advertisement targeted men and women aged 18-65+ who lived in New Zealand and ran from and 4th April 2020 – 4th July 2020 (overlapping with New Zeeland’s first lockdown period and recovery), and again from 18th August 2020 – 4th September (during the second Auckland lockdown). Given the unprecedented nature of the COVID-19 lockdowns, we thought it important to maximise sampling during these periods. The goal of the Facebook advertisement was threefold: (a) to increase name recognition of the NZAVS and remind people to complete the paper/online version already posted/emailed to them, (b) to help improve retention by potentially reaching previous lost participants who happened to see the advertisement, and (c) to recruit new participants (and also the partners of existing participants) while people were at home with some possibly having more free time during lockdown. This last goal was indirect and not explicitly stated it in the advertisement.</p>
<p>The Facebook advertisement read as follows: “Participate in the New Zealand Attitudes and Values Study. Complete the 2020 Questionnaire online” with the body of text: “If you are part of the NZAVS, but have not heard from us in the last year, then please consider completing the 2020 questionnaire online. The study is more important than ever as we aim to understand the impact of COVID-19 on mental health, wellbeing and resilience in our communities. We wish you all the best at this time and hope you keep well and stay safe.” This paid promotion reached 883,969 people, with 37,850 link clicks (i.e., clicking the link for the Qualtrics survey) according to Facebook. A total of 6106 people continued complete the questionnaire and provide full contact details, and were thus included in the dataset (4734 were new participants opting in to the study, and 1372 were previously ‘lost’ participants).</p>
<h2 id="appendix-2-johanness-mini-lecture-on-the-papaja-package">Appendix 2 Johannes’s mini-lecture on the <code>papaja</code> package</h2>
<p><a href="https://www.dropbox.com/s/ap96nfnvs833zq1/yaml.pptx?dl=0">Lecture</a></p>
<p><a href="https://www.dropbox.com/s/bvdo6z55kgfr0ri/technology.Rmd?dl=0">Papaja R markdown template</a></p>
<h2 id="appendix-3-style-advice-about-research-methods">Appendix 3 Style advice about research methods</h2>
<p>APA style advice <a href="https://opentextbc.ca/researchmethods/chapter/american-psychological-association-apa-style/">here</a></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-Kessler2002-ex" class="csl-entry" role="doc-biblioentry">
Kessler, R C, G Andrews, L J Colpe, E Hiripi, D K Mroczek, S L T Normand, E E Walters, and A M Zaslavsky. 2002. <span>“Short Screening Scales to Monitor Population Prevalences and Trends in Non-Specific Psychological Distress.”</span> <em>Psychol. Med.</em> 32 (6): 959–76.
</div>
<div id="ref-Kessler2010-xi" class="csl-entry" role="doc-biblioentry">
Kessler, Ronald C, Jennifer Greif Green, Michael J Gruber, Nancy A Sampson, Evelyn Bromet, Marius Cuitan, Toshi A Furukawa, et al. 2010. <span>“Screening for Serious Mental Illness in the General Population with the <span>K6</span> Screening Scale: Results from the <span>WHO</span> World Mental Health (<span>WMH</span>) Survey Initiative.”</span> <em>Int. J. Methods Psychiatr. Res.</em> 19 Suppl 1 (June): 4–22.
</div>
<div id="ref-Prochaska2012-dy" class="csl-entry" role="doc-biblioentry">
Prochaska, Judith J, Hai-Yen Sung, Wendy Max, Yanling Shi, and Michael Ong. 2012. <span>“Validity Study of the <span>K6</span> Scale as a Measure of Moderate Mental Distress Based on Mental Health Treatment Need and Utilization.”</span> <em>Int. J. Methods Psychiatr. Res.</em> 21 (2): 88–97.
</div>
</div>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>Notice, the intercept here is zero. This because we centered the new indicator at zero, and we wrote a model that is estimating the population average for this outcome (an intercept-only model). Don’t worry if you don’t know what an intercept is, we’ll get to regression in a few weeks.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="references">References</h3>
  <div id="references-listing"></div>
  <h3 id="updates-and-corrections">Corrections</h3>
  <p>If you see mistakes or want to suggest changes, please <a href="https://go-bayes.github.io/psych-447/">create an issue</a> on the source repository.</p>
  <h3 id="reuse">Reuse</h3>
  <p>Text and figures are licensed under Creative Commons Attribution <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>. Source code is available at <a href="https://go-bayes.github.io/psych-447/">https://go-bayes.github.io/psych-447/</a>, unless otherwise noted. The figures that have been reused from other sources don't fall under this license and can be recognized by a note in their caption: "Figure from ...".</p>
  <h3 id="citation">Citation</h3>
  <p>For attribution, please cite this work as</p>
  <pre class="citation-appendix short">Bulbulia (2021, March 16). Psych 447: Consolidation of skills. Retrieved from https://vuw-psych-447.netlify.app/posts/4_1/</pre>
  <p>BibTeX citation</p>
  <pre class="citation-appendix long">@misc{bulbulia2021consolidation,
  author = {Bulbulia, Joseph},
  title = {Psych 447: Consolidation of skills},
  url = {https://vuw-psych-447.netlify.app/posts/4_1/},
  year = {2021}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
